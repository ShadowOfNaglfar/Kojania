import{u as a,c as e,o as t,a as o,b as s,w as n,v as r,d as i,t as l,F as c,r as u,n as d,e as m,f as p,g,h,i as b,j as k,k as w}from"./vendor.de8ae70e.js";const v={ru:{common:"обычный",hard:"сложный",madness:"безумный",goal:"Текущая цель",Status:"Положение дел",Gold:"Золото",Moral:"Мораль",Renown:"Известность"},en:{goal:"Current target"}};const _=["max"];const y={},x=Object.assign(y,{setup:function(u){const d=a(),m=e((()=>d.state.Entity));return(a,e)=>(t(),o(c,null,[s("div",null,[n(s("input",{type:"range",class:"hire",min:"0",max:i(m).Kojania.availableWarriors,"onUpdate:modelValue":e[0]||(e[0]=a=>i(m).tohire=a)},null,8,_),[[r,i(m).tohire,void 0,{number:!0}]]),s("button",{onClick:e[1]||(e[1]=a=>i(m).tohire=i(m).Kojania.availableWarriors),id:"allBtn"},"max")]),s("p",null,"К найму: "+l(i(m).tohire)+" || На сумму: "+l(i(m).tohire*i(m).Kojania.hirecost),1),s("button",{onClick:e[2]||(e[2]=a=>i(d).dispatch("hire",i(m).tohire)),id:"hireBtn"},"Нанять")],64))}});const f={id:"content"},j={id:"goalContainerPositioner"},C={id:"goalContainer"},M={align:"left"},K={id:"globalInfoRow"},q=s("hr",{class:"svl"},null,-1),N=s("hr",{class:"svl"},null,-1),P=s("hr",null,null,-1),T={id:"globalInfoRow"},Q=s("hr",{class:"svl"},null,-1),R=s("hr",{class:"svl"},null,-1),W={id:"contentPositioner"},L={class:"kojaniaCont"},D=s("h3",null,"Кожания",-1),S=b("Отношения: "),A=b("Уровень процветания: "),E=b(" Демоническая угроза: "),I=b("Цена рекрута: "),B=s("br",null,null,-1),G={class:"squadCont"},U=s("h3",null,"Состав отряда",-1),H={key:0},O=["onClick","toolTip"],F=["onClick","toolTip"],V=["onClick","toolTip"],z=["onClick","toolTip"],J=s("br",null,null,-1),X={class:"modal-mask"},Y={class:"modal-wrapper"},Z={id:"day"},$=s("br",null,null,-1),aa=s("br",null,null,-1);const ea={data:()=>({local:"ru"}),methods:{l10n(a){return"en"==this.local&&void 0===v[this.local][a]?a:v[this.local][a]}}},ta=Object.assign(ea,{setup:function(r){const k=a(),w=e((()=>k.state.Entity));return(a,e)=>{const r=u("Tabs");return t(),o("div",f,[s("div",j,[s("div",C,[s("h3",null,l(a.l10n("goal")),1),s("p",null,l(i(w).quests[i(w).quests.active].goal),1)])]),s("div",null,[s("h3",M,l(a.l10n("Status")),1)]),s("div",K,[s("p",null,l(a.l10n("Gold"))+": "+l(i(w).gold),1),q,s("p",null,l(a.l10n("Moral"))+": "+l(i(w).squadState.morality),1),s("button",{class:"moralButton",onClick:e[0]||(e[0]=()=>{})},"▼"),N,s("p",null,l(a.l10n("Renown"))+": "+l(Math.floor(i(w).squadState.reputation)),1)]),P,s("div",T,[s("p",null,"Дней до выплаты: "+l(i(w).squadState.paydayleft),1),Q,s("p",null,"Жалование: "+l(i(k).getters.payday),1),R,s("button",{onClick:e[1]||(e[1]=()=>{})},"Финансы")]),s("div",W,[s("div",L,[D,s("p",null,[S,s("span",{class:d(i(k).getters.kojaniaReputation[1])},l(i(k).getters.kojaniaReputation[0]),3)]),s("p",null,[A,s("span",{class:d(i(k).getters.kojaniaProsperity[1])},l(i(k).getters.kojaniaProsperity[0]),3)]),s("p",null,[E,s("span",{class:d(i(k).getters.demonicPresence[1])},l(i(k).getters.demonicPresence[0]),3)]),s("p",null,[I,s("span",null,l(i(w).Kojania.hirecost),1)]),s("p",null,"Свободные рекруты: "+l(i(w).Kojania.availableWarriors),1),m(x),B,n(s("div",null,[s("p",null,"Контракты: "+l(i(w).availableContracts),1),n(s("button",{onClick:e[2]||(e[2]=(...e)=>a.openContractList&&a.openContractList(...e))},"Прием контрактов",512),[[p,i(w).availableContracts>0]])],512),[[p,i(w).isAvailableContracts&&!i(w).contract_is_taken[3]]]),n(s("p",null,"Принят контракт",512),[[p,i(w).contract_is_taken[0]]]),n(s("p",null,"Принят сложный контракт",512),[[p,i(w).contract_is_taken[1]]]),n(s("p",null,"Принят безумный контракт",512),[[p,i(w).contract_is_taken[2]]])]),s("div",G,[U,(t(!0),o(c,null,g(i(w).squad,((e,s)=>(t(),o("p",{class:"squadList",key:e},[e>0?(t(),o("div",H,[b(l(i(w).rangName[s])+": "+l(e)+" ",1),i(w).squad_imp[s]>0&&i(w).wa[s]>1?(t(),o("button",{key:0,onClick:e=>a.rangUp(s,1),toolTip:"Стоимость: "+2*i(w).wpc[s],class:"tooltip"}," 1+ ",8,O)):h("",!0),i(w).squad_imp[s]>=10&&i(w).wa[s]>1?(t(),o("button",{key:1,onClick:e=>a.rangUp(s,10),toolTip:"Стоимость: "+2*i(w).wpc[s]*10,class:"tooltip"}," 10+ ",8,F)):h("",!0),i(w).squad_imp[s]>=100&&i(w).wa[s]>1?(t(),o("button",{key:2,onClick:e=>a.rangUp(s,100),toolTip:"Стоимость: "+2*i(w).wpc[s]*100,class:"tooltip"}," 100+ ",8,V)):h("",!0),i(w).squad_imp[s]>1&&i(w).wa[s]>1?(t(),o("button",{key:3,onClick:e=>a.rangUp(s,i(w).squad_imp[s]),toolTip:"Стоимость: "+i(w).squad_imp[s]*i(w).wpc[s]*2,class:"tooltip"},l(i(w).squad_imp[s])+"+ ",9,z)):h("",!0)])):h("",!0)])))),128)),J,s("p",null,"Всего людей: "+l(i(k).getters.totalPeople),1),s("p",null,"Боевая мощь: "+l(i(k).getters.power),1),i(w).wa.smerd>0?(t(),o("button",{key:0,onClick:e[3]||(e[3]=(...e)=>a.openRangInfo&&a.openRangInfo(...e))},"? о рангах")):h("",!0),n(s("div",X,[s("div",Y,[m(r)])],512),[[p,i(w).show.rangInfo]])])]),s("div",null,[s("span",Z,"День: "+l(i(w).day),1),$,s("button",{onClick:e[4]||(e[4]=a=>i(k).dispatch("toNextDay")),class:"btnex"},"Завершение дня.")]),i(w).isDebug?(t(),o("button",{key:0,onClick:e[5]||(e[5]=a=>i(k).commit("addRep")),class:"btnex"},"+50 rep")):h("",!0),i(w).isDebug?(t(),o("button",{key:1,onClick:e[6]||(e[6]=a=>i(k).commit("addx2Rep")),class:"btnex"},"x2 rep")):h("",!0),i(w).isDebug?(t(),o("button",{key:2,onClick:e[7]||(e[7]=a=>i(k).commit("addRen")),class:"btnex"},"+50 ren")):h("",!0),i(w).isDebug?(t(),o("button",{key:3,onClick:e[8]||(e[8]=a=>i(k).commit("addGold")),class:"btnex"},"x10 gold")):h("",!0),i(w).isDebug?(t(),o("button",{key:4,onClick:e[9]||(e[9]=a=>i(k).commit("addDaemons")),class:"btnex"},"x2 daemons")):h("",!0),aa,i(w).isDebug?(t(),o("button",{key:5,onClick:e[10]||(e[10]=e=>a.showWhatHiden()),class:"btnex"},"showWhatHiden()")):h("",!0)])}}});const oa=k({modules:{Entity:{state:()=>({local:"ru",day:1,gold:1120,show:{rangInfo:!1},squadState:{paydayleft:6,morality:50,reputation:0},squad:{smerd:6,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},tohire:0,wa:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},wpc:{smerd:7,dubolom:12,warrior:35,veteran:100,knight:300,hero:1e3},wp:{smerd:10,dubolom:16,warrior:32,veteran:50,knight:100,hero:700},wdc:{smerd:40,dubolom:16,warrior:7,veteran:3,knight:2,hero:.01},warriorsdie:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},exp:{smerd:[60,0],dubolom:[200,0],warrior:[400,0],veteran:[1e3,0],knight:[4e3,0],hero:[1e6,0]},expbaseinc:{smerd:[2,3,4,5],dubolom:[2,4,8,12],warrior:[2,6,12,24],veteran:[2,6,12,36],knight:[2,6,12,48],hero:[0,0,0,0]},expreward:0,squad_imp:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},Kojania:{demonicPresence:30,demonicPresenceList:[{num:200,className:"white-grade",text:"редкие одиночные цели"},{num:1e3,className:"green-grade",text:"редкие малые стаи"},{num:2500,className:"yellow-grade",text:"возможны крупные стаи"},{num:5e3,className:"red-grade",text:"орды демонов"},{num:9e3,className:"black-grade",text:"чудовищные орды демонов"}],prosperity:250,prosperityList:[{num:50,className:"black-grade",text:"пепелище"},{num:200,className:"red-grade",text:"восстановление"},{num:1e3,className:"yellow-grade",text:"укрепление"},{num:2500,className:"green-grade",text:"стабильность"},{num:5e3,className:"white-grade",text:"экспансия"}],reputation:0,repSumm:0,reputationGain:[],reputationList:[{num:108,className:"yellow-grade",text:"нейтральные"},{num:250,className:"green-grade",text:"открытые"},{num:1e3,className:"white-grade",text:"теплые"},{num:5e3,className:"white-grade",text:"дружеские"},{num:1e4,className:"white-grade",text:"союзные"}],goldBonus:1,enemyBonus:1,availableWarriors:1,targetAvailableWarriors:2,baseHireCost:140,hirecost:14},messageLog1:"",messageLog2:[],battleReport:{result:{key:0,text:[]},gold:0,exp:0},info:["Демоны -- крайне опасные существа. Даже слабейший из них, за счет невероятной грубой силы и живучести, требует слаженной работы десятка людей. У них множество подвидов с различными особенностями. Но, как правило, дальнобойное оружие и добротные копья делают свое дело. По возможности лучше использовать ловушки и не допускать сближения.","Тушки демонов пользуются хорошим спросом. Почти каждую часть их тела можно считать стратегическим ресурсом. Кроме съедобного мяса это отличные доспехи из кожи. Вполне боеспособные луки и арбалеты из прочных связок. Невероятно огромный список амуниции из костей. Каждый участник охоты или сражения получает часть прибыли с этих трофеев."],quests:{active:"hire_10_smerd",hire_10_smerd:{goal:"Нанять 10 рекрутов",finishText:"Рекруты набираются опыта в бою и на тренировке. Когда они будут готовы стоит подумать об их продвижении. При продвижении придется заплатить разовое 2х недельное жалование. Но зато бойцы обязуются улучшить снаряжение, что сделает их сильнее уже в следующем бою и мотивирует на новые подвиги.",niceQuestMsgs:["Можно продвигать рекрутов.","Доступны простые контракты."]},found_contract:{goal:"Выполнить контракт.",finishText:"Время от времени будут появляться различные контракты. Их выполнение важно как для Кожании так и для нас. Хотя мы и не обызаны под этим подписываться, без Кожании у нас мало шансов. Заказчик укажет минимальные требования и предпологаемые проблемы... Однако реальность всегда может оказаться намного хуже самых смелых ожиданий. Если мы не хотим потерять все, нам придется быть к этому, по возможности, готовыми.",niceQuestMsgs:["Можно продвигать дуболомов.","Доступны сложные контракты."]},take_3000_gold:{goal:"3000 золота и 500 мощи",finishText:"Местный староста -- солидный господин. Он весьма снисходителен к гостям и готов бесплатно предоставлять некоторый уровень безопасности. Правда, вне центральной крепости, которая с каждым днем становится все более массивной. Благодаря его политике золото в цене даже в такие времена, а мы без проблем можем купить хорошую экипировку для наших воинов.",niceQuestMsgs:["Отдана 1000 золота, отношения улучшились.","Доступен прогноз рекрутов на следующий день.","Доступно резервирование отрядов."]},take_20_warriors:{goal:"20 воинов и 2000 мощи",finishText:"Нужно полностью захватить и обустроить рудные шахты и помочь с остальными ресурсами, расположенными далеко от поселения. Некоторые контракты -- чистое самоубийство, но вместе с тем их стратегическое значение крайне велико, возможно деже жизненно необходимо.",niceQuestMsgs:["Можно продвигать воинов","Доступны безумные контракты."]},take_10_veterans:{goal:"10 ветеранов и 5000 мощи",finishText:"Наша известность работает в обе стороны. В прославленный отряд присоединяется больше людей и этими людьми проще управлять. Нам доверяют самое лучшие оружие и щедро платят за трофеи. Однако лишь совсем ленивый или в конец тупой не заметил бы наши слабые места. Чем дольше мы сидим на одном месте, тем больше внимания в округе мы привлекаем. За стенами это не так заметно. Но к каждому контракту нужно относиться с осторожностью.",niceQuestMsg1:"Можно продвигать ветеранов",niceQuestMsgs:["Можно продвигать ветеранов."]},take_10_knights:{goal:"10 рыцарей и 9000 мощи",finishText:"Туши убитых демонов полны сюрпризов. Металлурги и алхимики делают исключительные открытия и создают невероятные вещи. Конечно, кто-то должен эти туши добыть, как правило ценой своих жизней, а потом кто-то должен с ними как следует поработать. Но в такие времена сам факт прогресса уже вселяет надежду.",niceQuestMsgs:["Можно продвигать рыцарей."]},take_10_heroes:{goal:"10 героев и 40к мощи",finishText:"Победа (нет)",niceQuestMsgs:[""]}},isAvailableContracts:!1,contracts:{common:{isAvailable:!1,generationChance:[12,12],revard:{first:200,loot:20},prosperityChange:6,reputationCnange:8,chancetoLose:[0,10],basePower:50,scaleRange:6},hard:{isAvailable:!1,generationChance:[5,5],revard:{first:600,loot:35},prosperityChange:10,reputationCnange:16,chancetoLose:[0,4],basePower:300,scaleRange:4},madness:{isAvailable:!1,generationChance:[2,2],revard:{first:1800,loot:50},prosperityChange:20,reputationCnange:32,chancetoLose:[0,2],basePower:1e3,scaleRange:3}},contract_list:[],availableContracts:0,contract_is_taken:[0,0,0,0],rangName:{smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герой"},modalError:!1,modalErrorText:"",modalMissionText:"",isDebug:!0}),mutations:{toNextDay(a){a.day++,a.squadState.paydayleft--,a.Kojania.demonicPresence+=.01*a.Kojania.demonicPresence+1},time2Pay(a,e){a.squadState.paydayleft+=7,a.gold-=e},hire(a,e){a.squad.smerd+=e,a.gold-=a.Kojania.hirecost*e,a.Kojania.availableWarriors-=e},hire_reset_helper(a,e){a.Kojania.availableWarriors<e&&(a.tohire=a.Kojania.availableWarriors)},availableWarriors(a){a.Kojania.availableWarriors=Math.floor(a.Kojania.availableWarriors*Math.min(.6*(1+Math.pow(a.Kojania.prosperity,.5)/100),1)+Math.random()*Math.pow(a.Kojania.reputation+10,.7)),a.Kojania.availableWarriors<a.tohire&&(a.tohire=a.Kojania.availableWarriors)},error(a,e){a.modalErrorText=e,a.modalError=!0},addGold(a){a.gold*=10},addRep(a){a.Kojania.reputation+=50,console.log(a.Kojania.reputation)},addRen(a){a.squadState.reputation+=50,console.log(a.squadState.reputation)},addx2Rep(a){a.Kojania.reputation*=2,console.log(a.Kojania.reputation)},addDaemons(a){a.Kojania.demonicPresence*=2,console.log(a.Kojania.demonicPresence)}},actions:{toNextDay({commit:a,state:e,getters:t,dispatch:o}){a("toNextDay"),0==e.squadState.paydayleft&&a("time2Pay",t.payday),a("availableWarriors"),o("checkQuest")},checkQuest({commit:a,state:e,getters:t,dispatch:o},s){let n=e.quests,r=e.squad;switch(n.active){case"hire_10_smerd":r.smerd>=10&&(o("showQuestMsg",n),e.wa.smerd=2,e.wa.dubolom=1,e.isAvailableContracts=!0,e.contracts.common.isAvailable=!0,n.active="found_contract");break;case"found_contract":s&&(o("showQuestMsg",n),e.wa.dubolom=2,e.wa.warrior=1,e.contracts.hard.isAvailable=!0,n.active="take_3000_gold");break;case"take_3000_gold":e.gold>3e3&&this.power>500&&(e.gold-=1e3,e.Kojania.reputation+=50,o("showQuestMsg",n),n.active="take_20_warriors");break;case"take_20_warriors":r.warrior>=20&&this.power>2e3&&(o("showQuestMsg",n),e.wa.warrior=2,e.wa.veteran=1,e.contracts.madness.isAvailable=!0,n.active="take_10_veterans");break;case"take_10_veterans":r.veteran>=10&&this.power>5e3&&(o("showQuestMsg",n),e.wa.veteran=2,e.wa.knight=1,n.active="take_10_knights");break;case"take_10_knights":r.knight>=10&&this.power>9e3&&(o("showQuestMsg",n),e.wa.knight=2,e.wa.hero=1,n.active="take_10_heroes");break;case"take_10_heroes":r.hero>=10&&this.power>2e4&&o("showQuestMsg",n)}},showQuestMsg({dispatch:a},e){a("finishMissionMessage",e[e.active].finishText,e[e.active].niceQuestMsgs)},finishMissionMessage({state:a},e,t){a.modalMissionText=e,a.modalMission=!0,a.niceQuestMsgs=t},hire({commit:a,state:e},t){a("hire_reset_helper",1),e.gold>=e.Kojania.hirecost*t&&e.Kojania.availableWarriors>0?a("hire",t):e.Kojania.availableWarriors>0?a("error","Нужно больше золота."):a("error","Рекруты закончились. Возможно завтра будут новые."),a("hire_reset_helper",1)}},getters:{payday:(a,e)=>{let t=0;for(let o in a.squad)t+=a.squad[o]*a.wpc[o];return t},power:(a,e)=>{let t=0;for(let o in a.squad)t+=a.squad[o]*a.wp[o];return t},totalPeople:(a,e)=>{let t=0;for(let o in a.squad)t+=a.squad[o];return t},demonicPresence:(a,e)=>{for(const t of a.Kojania.demonicPresenceList)if(Math.min(9e3,a.Kojania.demonicPresence)<=t.num)return[t.text,t.className]},kojaniaReputation:(a,e)=>{for(const t of a.Kojania.reputationList)if(Math.min(1e4,a.Kojania.repSumm)<=t.num)return[t.text,t.className]},kojaniaProsperity:(a,e)=>{for(const t of a.Kojania.prosperityList)if(Math.min(5e3,a.Kojania.prosperity)<=t.num)return[t.text,t.className]}}}}});w(ta).use(oa).mount("#app");
