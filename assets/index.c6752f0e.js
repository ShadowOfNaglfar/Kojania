import{u as a,c as e,o as t,a as s,b as o,w as n,v as r,d as l,t as i,F as c,e as d,f as u,r as m,g as p,h,n as g,i as v,j as b,k as f}from"./vendor.71af84ca.js";const y={ru:{common:"обычный",hard:"сложный",madness:"безумный",goal:"Текущая цель",Status:"Положение дел",Gold:"Золото",Payday:"Дней до выплаты",Moral:"Мораль",Renown:"Известность",smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герои",smerds:"Рекруты",duboloms:"Дуболомы",warriors:"Воины",veterans:"Ветераны",knights:"Рыцари",heroes:"Герои"},en:{common:"common",hard:"hard",madness:"madness",goal:"Current target",Status:"Status",Gold:"Gold",Payday:"Days to payday",Moral:"Moral",Renown:"Renown",smerd:"smerd",dubolom:"dubolom",warrior:"warrior",veteran:"veteran",knight:"knight",hero:"hero",smerds:"smerds",duboloms:"duboloms",warriors:"warriors",veterans:"veterans",knights:"knights",heroes:"heroes"}};const k=["max"];const w={},M=Object.assign(w,{setup:function(d){const u=a(),m=e((()=>u.state.Entity));return(a,e)=>(t(),s(c,null,[o("div",null,[n(o("input",{type:"range",class:"hire",min:"0",max:l(m).Kojania.availableWarriors,"onUpdate:modelValue":e[0]||(e[0]=a=>l(m).tohire=a)},null,8,k),[[r,l(m).tohire,void 0,{number:!0}]]),o("button",{onClick:e[1]||(e[1]=a=>l(m).tohire=l(m).Kojania.availableWarriors),id:"allBtn"},"max")]),o("p",null,"К найму: "+i(l(m).tohire)+" || На сумму: "+i(l(m).tohire*l(m).Kojania.hirecost),1),o("button",{onClick:e[2]||(e[2]=a=>l(u).dispatch("hire",l(m).tohire)),id:"hireBtn"},"Нанять")],64))}});const C=o("br",null,null,-1),_=d(" | "),R=o("br",null,null,-1),q=o("label",{for:"rangUp"},"готовых к повешению",-1),x=o("br",null,null,-1),j=o("label",{for:"rangDown"},"не готовых к повышению ",-1),P=o("br",null,null,-1),K=o("label",{for:"all"},"всех",-1),S=o("div",null,null,-1),L=o("hr",{id:"niceLine2"},null,-1);const G={data:()=>({dictS:{smerd:"smerds",dubolom:"duboloms",warrior:"warriors",veteran:"veterans",knight:"knights",hero:"heroes"}}),props:["name"],methods:{}},D=Object.assign(G,{setup:function(r){const c=a(),m=e((()=>c.state.Entity));return(a,e)=>(t(),s("div",null,[o("div",null,[o("div",null,[d(i(l(m).Dict[a.dictS[r.name]])+":",1),C,d(" В отряде: "+i(l(m).squad[r.name])+" / "+i(l(m).squad_imp[r.name])+"↑ | В резерве: "+i(l(m).squadReserved[r.name])+" / "+i(l(m).squad_imp_reserv[r.name])+"↑ "+i()+" ",1),o("div",null,[o("button",{class:"closeCartButton min-w40",onClick:e[0]||(e[0]=a=>l(c).dispatch("takeReserve",{mode:l(m).radioReservSelect,name:r.name}))},"Забрать"),_,o("button",{class:"closeCartButton min-w40",onClick:e[1]||(e[1]=a=>l(c).dispatch("takeSquad",{mode:l(m).radioReservSelect,name:r.name}))},"Отослать"),R,n(o("input",{class:"radio",type:"radio","onUpdate:modelValue":e[2]||(e[2]=a=>l(m).radioReservSelect=a),name:"smerd",value:"rangUp",id:"rangUp"},null,512),[[u,l(m).radioReservSelect]]),q,x,n(o("input",{class:"radio",type:"radio","onUpdate:modelValue":e[3]||(e[3]=a=>l(m).radioReservSelect=a),name:"smerd",value:"rangDown",id:"rangDown"},null,512),[[u,l(m).radioReservSelect]]),j,P,n(o("input",{class:"radio",type:"radio","onUpdate:modelValue":e[4]||(e[4]=a=>l(m).radioReservSelect=a),name:"smerd",value:"all",id:"all"},null,512),[[u,l(m).radioReservSelect]]),K])]),S]),L]))}});const H=o("br",null,null,-1),I=d(" Охоты: "),T={class:"num"},N=o("br",null,null,-1),E=d(" Гарнизон: "),Q={class:"num"},W=o("br",null,null,-1),B=d(" Контракты: "),A={class:"num"},F=o("br",null,null,-1),O=o("hr",{id:"niceLine2"},null,-1),V=d(" Жалование: "),U={class:"num"},z=o("br",null,null,-1),$=d(" Найм: "),J={class:"num"},X=o("br",null,null,-1),Y=d(" Продвижение: "),Z={class:"num"},aa=o("br",null,null,-1),ea=o("br",null,null,-1);const ta={data:()=>({}),props:["period"],methods:{}},sa=Object.assign(ta,{setup:function(n){const r=a(),c=e((()=>r.state.Entity));return(a,e)=>(t(),s("div",null,[o("div",null,[o("div",null,[H,I,o("span",T,i(l(c).goldHist.Inc.hunt[n.period].toLocaleString()),1),N,E,o("span",Q,i(l(c).goldHist.Inc.reserv[n.period].toLocaleString()),1),W,B,o("span",A,i(l(c).goldHist.Inc.contracts[n.period].toLocaleString()),1),F,O,V,o("span",U,i(l(c).goldHist.Cost.payday[n.period].toLocaleString()),1),z,$,o("span",J,i(l(c).goldHist.Cost.hire[n.period].toLocaleString()),1),X,Y,o("span",Z,i(l(c).goldHist.Cost.upg[n.period].toLocaleString()),1),aa,ea])])]))}});const oa={key:0,class:"modal-mask"},na={class:"modal-wrapper"},ra={class:"modal-position"},la={id:"contracts-block"},ia={id:"contractTable"},ca=o("tr",null,[o("th",null,"Тип"),o("th",null,"Мин. мощь"),o("th",null,"Реком. мощь"),o("th")],-1),da={key:0},ua=["onClick"],ma={class:"modal-mask"},pa={class:"modal-wrapper"},ha={class:"modal-position"},ga={id:"mission-block"},va={id:"plus"},ba=o("hr",null,null,-1),fa={class:"missionText"},ya=o("br",null,null,-1),ka={class:"modal-mask"},wa={class:"modal-wrapper"},Ma={class:"modal-position"},Ca={id:"mission-block"},_a={id:"plus"},Ra=o("p",{class:"missionText"}," Кожания... Эта маленькой деревушка и есть последний оплот человечества на ближайшие тысячи миль вокруг. Мы сумели добраться этого места... И потеряли почти всех людей в пути... ",-1),qa=o("p",{class:"missionText"}," Встретев лишь одного слабого демона... ",-1),xa=o("p",{class:"missionText"}," И все же наш дальшейший путь лежит на встречу распространяющейся демонической угрозе. Нам предстоит превратить наш отряд в непреклонную боевую машину. ",-1),ja=o("br",null,null,-1),Pa={class:"modal-mask"},Ka={class:"modal-wrapper"},Sa={class:"modal-position"},La={id:"reserv-block"},Ga=["onClick","disabled"],Da={key:0},Ha={key:1},Ia=o("p",{style:{"margin-top":"8px"}},"Общий резерв:",-1),Ta=o("hr",null,null,-1),Na=o("p",null,"Расширение гарнизона:",-1),Ea=d(" | "),Qa=o("hr",null,null,-1),Wa={class:"modal-mask"},Ba={class:"modal-wrapper"},Aa={class:"modal-position"},Fa={id:"moral-block"},Oa=d(" Изменения морали:"),Va=o("br",null,null,-1),Ua=o("div",null,[o("span",{class:"floatL"},"Базовая:"),o("span",{class:"floatR"},"50")],-1),za=o("br",null,null,-1),$a={key:0},Ja=o("span",{class:"floatL"},"Известность:",-1),Xa={class:"floatR"},Ya=o("br",null,null,-1),Za={key:1},ae=o("span",{class:"floatL"},"Победы:",-1),ee={class:"floatR"},te=o("br",null,null,-1),se={key:2},oe=o("span",{class:"floatL"},"Спокойные дни:",-1),ne={class:"floatR"},re=o("br",null,null,-1),le={key:3},ie=o("span",{class:"floatL"},"Богатство:",-1),ce={class:"floatR"},de=o("br",null,null,-1),ue=o("hr",null,null,-1),me={key:4},pe=o("span",{class:"floatL"},"Поражения:",-1),he={class:"floatR"},ge=o("br",null,null,-1),ve={key:5},be=o("span",{class:"floatL"},"Человеческие потери:",-1),fe={class:"floatR"},ye=o("br",null,null,-1),ke={key:6},we=o("span",{class:"floatL"},"Боевоя мощь утрачена:",-1),Me={class:"floatR"},Ce=o("br",null,null,-1),_e={key:7},Re=o("span",{class:"floatL"},"Долг людям:",-1),qe={class:"floatR"},xe=o("br",null,null,-1),je={key:8},Pe=o("span",{class:"floatL"},"Размер отряда:",-1),Ke={class:"floatR"},Se=o("br",null,null,-1),Le={class:"modal-mask"},Ge={class:"modal-wrapper"},De={class:"modal-position"},He={id:"finance-block"},Ie=["onClick"],Te={class:"modal-mask"},Ne={class:"modal-wrapper"},Ee={class:"modal-position"},Qe={id:"final-score-block"},We={key:0},Be=[o("span",{class:"white-grade finishH"},"Победа.",-1),o("br",null,null,-1)],Ae={key:1},Fe=[o("span",{class:"black-grade finishH"},"Поражение.",-1),o("br",null,null,-1)],Oe={class:"finishS"},Ve=d("Счет: "),Ue={class:"num"},ze=o("br",null,null,-1),$e=o("p",null,[d("Попытаться еще "),o("a",{href:""},"разочек")],-1),Je={class:"modal-mask"},Xe={class:"modal-wrapper"},Ye={class:"modal-position"},Ze={id:"error-block"},at=o("br",null,null,-1);const et={data:()=>({currentTab:"smerd",tabs:["smerd","dubolom","warrior","veteran","knight","hero"],period:"week",tabs_f:["week","month","all"]})},tt=Object.assign(et,{setup:function(r){const u=a(),b=e((()=>u.state.Entity));return(a,e)=>(t(),s(c,null,[l(b).modalContracts?(t(),s("div",oa,[o("div",na,[o("div",ra,[o("div",la,[o("table",ia,[ca,(t(!0),s(c,null,m(l(b).contract_list,((a,e)=>(t(),s("tbody",null,[l(b).contracts[a.dif].isAvailable?(t(),s("tr",da,[o("td",null,i(l(b).Dict[a.dif]),1),o("td",null,i(a.minPower),1),o("td",null,i(a.recommendedPower),1),o("td",null,[o("button",{class:"closeCartButton",onClick:t=>l(u).dispatch("takeContract",{contract:a,index:e})},"Принять",8,ua)])])):p("",!0)])))),256))]),o("button",{class:"closeCartButton",onClick:e[0]||(e[0]=a=>l(b).modalContracts--)},"Пожалуй не сейчас...")])])])])):p("",!0),n(o("div",ma,[o("div",pa,[o("div",ha,[o("div",ga,[(t(!0),s(c,null,m(l(b).niceQuestMsgs,((a,e)=>(t(),s("p",va,i(a),1)))),256)),ba,(t(!0),s(c,null,m(l(b).modalMissionParagraphs,((a,e)=>(t(),s("p",fa,i(a),1)))),256)),ya,o("button",{class:"closeCartButton",onClick:e[1]||(e[1]=a=>l(b).modalMission--)},"Понимаю")])])])],512),[[h,l(b).modalMission]]),n(o("div",ka,[o("div",wa,[o("div",Ma,[o("div",Ca,[(t(!0),s(c,null,m(l(b).niceQuestMsgs,((a,e)=>(t(),s("p",_a,i(a),1)))),256)),Ra,qa,xa,ja,o("button",{class:"closeCartButton",onClick:e[2]||(e[2]=a=>l(b).isStartMessage--)},"Принять.")])])])],512),[[h,l(b).isStartMessage]]),n(o("div",Pa,[o("div",Ka,[o("div",Sa,[o("div",La,[(t(!0),s(c,null,m(a.tabs,((e,o)=>(t(),s("button",{key:e,class:g(["tab-button",{active:a.currentTab===e}]),onClick:t=>a.currentTab=e,disabled:!(l(b).wa[e]>0)},[l(b).wa[e]>0?(t(),s("span",Da,i(l(b).rangName[e])+i(),1)):(t(),s("span",Ha,"???"))],10,Ga)))),128)),Ia,d(" "+i(l(u).getters.totalReserved)+" из "+i(l(b).reservCapacity)+" ",1),o("p",null,"Ежедневный доход от гарнизона: "+i(l(u).getters.reservTax),1),o("p",null,"Ежедневный опыт гарнизона: "+i(l(u).getters.reservExp),1),Ta,v(D,{name:a.currentTab},null,8,["name"]),Na,o("button",{class:"closeCartButton min-w40",onClick:e[3]||(e[3]=a=>l(u).dispatch("buyReservSpace",1))},"+1 "),Ea,o("button",{class:"closeCartButton min-w40",onClick:e[4]||(e[4]=a=>l(u).dispatch("buyReservSpace",10))},"+10"),o("p",null,"Цена 1 места: "+i(l(b).costReservPlace),1),o("p",null,"Цена 10 мест: "+i(l(b).costReservPlacex10),1),Qa,o("button",{class:"closeCartButton",onClick:e[5]||(e[5]=a=>l(b).modalReservation--)},"Готово")])])])],512),[[h,l(b).modalReservation]]),n(o("div",Wa,[o("div",Ba,[o("div",Aa,[o("div",Fa,[Oa,Va,o("div",null,[Ua,za,l(u).getters.moralRenown>0?(t(),s("div",$a,[Ja,o("span",Xa,"+"+i(l(u).getters.moralRenown),1),Ya])):p("",!0),l(b).moralModifiers.Victory>0?(t(),s("div",Za,[ae,o("span",ee,"+"+i(l(b).moralModifiers.Victory),1),te])):p("",!0),l(b).moralModifiers.smallVictory>0?(t(),s("div",se,[oe,o("span",ne,"+"+i(l(b).moralModifiers.smallVictory),1),re])):p("",!0),l(u).getters.moralRich>0?(t(),s("div",le,[ie,o("span",ce,"+"+i(l(u).getters.moralRich),1),de])):p("",!0),ue,l(b).moralModifiers.Defeat>0?(t(),s("div",me,[pe,o("span",he,"-"+i(l(b).moralModifiers.Defeat),1),ge])):p("",!0),l(b).moralModifiers.humanLost>0?(t(),s("div",ve,[be,o("span",fe,"-"+i(l(b).moralModifiers.humanLost),1),ye])):p("",!0),l(b).moralModifiers.powerLost>0?(t(),s("div",ke,[we,o("span",Me,"-"+i(l(b).moralModifiers.powerLost),1),Ce])):p("",!0),l(u).getters.moralDept<0?(t(),s("div",_e,[Re,o("span",qe,i(l(u).getters.moralDept),1),xe])):p("",!0),l(u).getters.moralSquadSize>0?(t(),s("div",je,[Pe,o("span",Ke,"-"+i(l(u).getters.moralSquadSize),1),Se])):p("",!0)]),o("button",{class:"closeCartButton",onClick:e[6]||(e[6]=a=>l(b).modalMoral--)},"Готово")])])])],512),[[h,l(b).modalMoral]]),n(o("div",Le,[o("div",Ge,[o("div",De,[o("div",He,[(t(!0),s(c,null,m(a.tabs_f,((e,n)=>(t(),s("button",{key:e,class:g(["tab-button",{active:a.period===e}]),onClick:t=>a.period=e},[o("span",null,i(e),1)],10,Ie)))),128)),v(sa,{period:a.period},null,8,["period"]),o("button",{class:"closeCartButton",onClick:e[7]||(e[7]=a=>l(b).modalFinance--)},"Готово")])])])],512),[[h,l(b).modalFinance]]),n(o("div",Te,[o("div",Ne,[o("div",Ee,[o("div",Qe,[l(b).isWin?(t(),s("div",We,Be)):(t(),s("div",Ae,Fe)),o("span",Oe,[Ve,o("span",Ue,i(l(b).finalScore.toLocaleString()),1)]),ze,$e])])])],512),[[h,l(b).modalFinalScore]]),n(o("div",Je,[o("div",Xe,[o("div",Ye,[o("div",Ze,[d(i(l(b).modalErrorText)+" ",1),at,o("button",{class:"closeCartButton",onClick:e[8]||(e[8]=a=>l(b).modalError--)},"Понимаю")])])])],512),[[h,l(b).modalError]])],64))}});const st={class:"tab"},ot={class:"row"},nt=o("hr",{id:"niceLine"},null,-1),rt={class:"rangSpecifics"},lt={class:"rangText",id:"plus"},it={class:"rangText",id:"minus"},ct=o("br",null,null,-1),dt=["src"],ut=o("hr",{id:"niceLine2"},null,-1),mt={class:"rangText",id:"rangText"};const pt={data:()=>({rangInfo:{smerd:{info:"Иногда попадаются толковые ребята. Но в среднем -- пушечное мясо, готовое обмочить штанишки при виде чуть грозного противника.",plus:["Дешевый","Легко обучается"],minus:["Массово гибнет"],url:"1"},dubolom:{info:"Дуболом отличился высоким боевым духом. Мастерство и экипировка все еще могут оставлять желать лучшего, но, по крайней мере, он не подводет в сложный и отвественный момент.",plus:["Неприхотлив","Обучение без рисков"],minus:["Слегка высокая смертность"],url:"2"},warrior:{info:"Воин звучит гордо. Хорошие навыки, разнообразное и качественное снаряжение, а так же непоколебимость -- это звание получают не просто так.",plus:["Сильный боец","Низкая смертность"],minus:["Обучение в бою"],url:"3"},veteran:{info:"Ветераны нашли способ пройти путь воина и сохранить большую из своих частей тела. Приобрели внушительную гибкость в снаряжении и умение выпутываться из сложной ситуации. Великолепные боевые навыки. Готовность успешно выполнить любой, самый безумный приказ. Хотя и это не предел.",plus:["Сильный боец","Очень низкая смертность"],minus:["Высокое содержание","Обучение в бою"],url:"4"},knight:{info:"Человеческая элита, лучшие из лучших. Без отваги на поле боя, граничащей с безумием, до этого ранга не дойти. Самые лучшие трофеи, в первую очередь, попадут в их загребущие до интересностей рученки. Качество их снаряжения, как и расходы в золоте, взлетают до запредельного уровня.",plus:["Очень сильный боец","Крайне живучий гад"],minus:["Очень высокое содержание","Обучается в сложных битвах"],url:"5"},hero:{info:"Специализация героев может быть самой разной. Умения на грани здравого смысла. Сотни и тысячи поверженных врагов на личном счету. Различные могущественные артефакты -- все это обязательные атрибуты Героев.",plus:["Сила не поддается описанию","Условно бессмертен"],minus:["Безумно сложное обучение"],url:"6"}},rangName:{smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герой"}}),props:["name"],methods:{}},ht=Object.assign(pt,{setup:function(n){const r=a(),d=e((()=>r.state.Entity));return(a,e)=>{return t(),s("div",st,[o("div",ot,[o("div",null,[o("h2",null,i(l(d).rangName[n.name]),1),nt,o("div",rt,[(t(!0),s(c,null,m(a.rangInfo[n.name].plus,(a=>(t(),s("p",lt,"+ "+i(a),1)))),256)),(t(!0),s(c,null,m(a.rangInfo[n.name].minus,(a=>(t(),s("p",it,"- "+i(a),1)))),256)),ct,o("p",null,"Cодержание: "+i(l(d).wpc[n.name]),1)])]),o("div",null,[o("div",null,[o("img",{id:"pic",src:(r=a.rangInfo[n.name].url,new URL({"./rang-avarars/1.png":"/KojaniaR0/assets/1.ea454ab5.png","./rang-avarars/2.png":"/KojaniaR0/assets/2.c8991c68.png","./rang-avarars/3.png":"/KojaniaR0/assets/3.72bd031c.png","./rang-avarars/4.png":"/KojaniaR0/assets/4.7cf7f6ff.png","./rang-avarars/5.png":"/KojaniaR0/assets/5.30a644bf.png","./rang-avarars/6.png":"/KojaniaR0/assets/6.bd119c05.png"}[`./rang-avarars/${r}.png`],window.location).href),alt:"",srcset:""},null,8,dt)])])]),ut,o("p",mt,i(a.rangInfo[n.name].info),1),o("button",{class:"closeCartButton",onClick:e[0]||(e[0]=a=>l(d).show.rangInfo=!1)},"Закрыть")]);var r}}});const gt={class:"modal-position",style:{"margin-left":"-185px"}},vt={id:"tab-buttons-cont"},bt=["onClick","disabled"],ft={key:0},yt={key:1};const kt={components:{RangCart:ht},data:()=>({currentTab:"smerd",tabs:["smerd","dubolom","warrior","veteran","knight","hero"]})},wt=Object.assign(kt,{setup:function(n){const r=a(),d=e((()=>r.state.Entity));return(a,e)=>(t(),s("div",gt,[o("div",vt,[(t(!0),s(c,null,m(a.tabs,((e,o)=>(t(),s("button",{key:e,class:g(["tab-button",{active:a.currentTab===e}]),onClick:t=>a.currentTab=e,disabled:!(l(d).wa[e]>0)},[l(d).wa[e]>0?(t(),s("span",ft,i(l(d).rangName[e])+i(),1)):(t(),s("span",yt,"???"))],10,bt)))),128))]),v(ht,{name:a.currentTab},null,8,["name"])]))}});const Mt={id:"content"},Ct={id:"localContainerPositioner"},_t={id:"local"},Rt={id:"goalContainerPositioner"},qt={id:"goalContainer"},xt={align:"left"},jt={id:"globalInfoRow"},Pt=o("hr",{class:"svl"},null,-1),Kt=o("hr",{class:"svl"},null,-1),St=o("hr",null,null,-1),Lt={id:"globalInfoRow"},Gt=o("hr",{class:"svl"},null,-1),Dt=o("hr",{class:"svl"},null,-1),Ht={id:"contentPositioner"},It={class:"kojaniaCont"},Tt=o("h3",null,"Кожания",-1),Nt=d("Отношения: "),Et=d("Уровень процветания: "),Qt=d(" Демоническая угроза: "),Wt=d("Цена рекрута: "),Bt=o("br",null,null,-1),At={class:"squadCont"},Ft=o("h3",null,"Состав отряда",-1),Ot={class:"squadList"},Vt={key:0},Ut=["onClick","toolTip"],zt=["onClick","toolTip"],$t=["onClick","toolTip"],Jt=["onClick","toolTip"],Xt=o("br",null,null,-1),Yt={class:"modal-mask"},Zt={class:"modal-wrapper"},as={id:"day"},es=o("br",null,null,-1),ts=o("br",null,null,-1),ss={key:0},os=o("hr",null,null,-1),ns={id:"eventLogCont"},rs=o("h3",null,"События за сутки",-1),ls={class:"ml"},is=d(" ..."),cs=o("br",null,null,-1),ds={class:"ml"},us=o("hr",null,null,-1),ms=o("br",null,null,-1);const ps={data:()=>({local:"ru"}),methods:{l10n(a){return"en"==this.local&&void 0===y[this.local][a]?a:y[this.local][a]}}},hs=Object.assign(ps,{setup:function(r){const u=a(),b=e((()=>u.state.Entity));return u.commit("setDict","ru"),(a,e)=>(t(),s("div",Mt,[o("div",Ct,[o("div",_t,[l(b).isDebug?(t(),s("button",{key:0,onClick:e[0]||(e[0]=a=>l(u).commit("setDict","en")),class:"btnex"},"en")):p("",!0),l(b).isDebug?(t(),s("button",{key:1,onClick:e[1]||(e[1]=a=>l(u).commit("setDict","ru")),class:"btnex"},"ru")):p("",!0)])]),o("div",Rt,[o("div",qt,[o("h3",null,i(l(b).Dict.goal),1),o("p",null,i(l(b).quests[l(b).quests.active].goal),1)])]),o("div",null,[o("h3",xt,i(l(b).Dict.Status),1)]),o("div",jt,[o("p",null,i(l(b).Dict.Gold)+": "+i(l(b).gold),1),Pt,o("p",null,i(l(b).Dict.Moral)+": "+i(l(u).getters.morality),1),o("button",{class:"moralButton",onClick:e[2]||(e[2]=a=>l(u).commit("openMoralModal"))},"▼"),Kt,o("p",null,i(l(b).Dict.Renown)+": "+i(Math.floor(l(b).squadState.reputation)),1)]),St,o("div",Lt,[o("p",null,i(l(b).Dict.Payday)+": "+i(l(b).squadState.paydayleft),1),Gt,o("p",null,"Жалование: "+i(l(u).getters.payday),1),Dt,o("button",{onClick:e[3]||(e[3]=a=>l(u).commit("openFinanceModal"))},"Финансы")]),o("div",Ht,[o("div",It,[Tt,o("p",null,[Nt,o("span",{class:g(l(u).getters.kojaniaReputation[1])},i(l(u).getters.kojaniaReputation[0]),3)]),o("p",null,[Et,o("span",{class:g(l(u).getters.kojaniaProsperity[1])},i(l(u).getters.kojaniaProsperity[0]),3)]),o("p",null,[Qt,o("span",{class:g(l(u).getters.demonicPresence[1])},i(l(u).getters.demonicPresence[0]),3)]),o("p",null,[Wt,o("span",null,i(l(b).Kojania.hirecost),1)]),o("p",null,"Свободные рекруты: "+i(l(b).Kojania.availableWarriors),1),v(M),Bt,n(o("div",null,[o("p",null,"Контракты: "+i(l(b).availableContracts),1),n(o("button",{onClick:e[4]||(e[4]=a=>l(u).commit("openContractList"))},"Прием контрактов",512),[[h,l(b).availableContracts>0]])],512),[[h,l(b).isAvailableContracts&&!l(b).contract_is_taken[3]]]),n(o("p",null,"Принят контракт",512),[[h,l(b).contract_is_taken[0]]]),n(o("p",null,"Принят сложный контракт",512),[[h,l(b).contract_is_taken[1]]]),n(o("p",null,"Принят безумный контракт",512),[[h,l(b).contract_is_taken[2]]])]),o("div",At,[Ft,(t(!0),s(c,null,m(l(b).squad,((a,e)=>(t(),s("p",Ot,[a>0?(t(),s("div",Vt,[d(i(l(b).rangName[e])+": "+i(a)+" ",1),l(b).squad_imp[e]>0&&l(b).wa[e]>1?(t(),s("button",{key:0,onClick:a=>l(u).dispatch("rangUp",{rang:e,count:1}),toolTip:"Стоимость: "+2*l(b).wpc[e],class:"tooltip"}," 1+ ",8,Ut)):p("",!0),l(b).squad_imp[e]>=10&&l(b).wa[e]>1?(t(),s("button",{key:1,onClick:a=>l(u).dispatch("rangUp",{rang:e,count:10}),toolTip:"Стоимость: "+2*l(b).wpc[e]*10,class:"tooltip"}," 10+ ",8,zt)):p("",!0),l(b).squad_imp[e]>=100&&l(b).wa[e]>1?(t(),s("button",{key:2,onClick:a=>l(u).dispatch("rangUp",{rang:e,count:100}),toolTip:"Стоимость: "+2*l(b).wpc[e]*100,class:"tooltip"}," 100+ ",8,$t)):p("",!0),l(b).squad_imp[e]>1&&l(b).wa[e]>1?(t(),s("button",{key:3,onClick:a=>l(u).dispatch("rangUp",{rang:e,count:l(b).squad_imp[e]}),toolTip:"Стоимость: "+l(b).squad_imp[e]*l(b).wpc[e]*2,class:"tooltip"},i(l(b).squad_imp[e])+"+ ",9,Jt)):p("",!0)])):p("",!0)])))),256)),Xt,o("p",null,"Всего людей: "+i(l(u).getters.totalPeople),1),o("p",null,"Общая сила: "+i(l(u).getters.power),1),l(b).wa.smerd>0?(t(),s("button",{key:0,onClick:e[5]||(e[5]=a=>l(u).commit("openRangInfo"))},"? о рангах")):p("",!0),l(b).isArmyReserving?(t(),s("button",{key:1,onClick:e[6]||(e[6]=a=>l(u).commit("openReservModal")),class:"btnex"},"Резерв")):p("",!0)])]),n(o("div",Yt,[o("div",Zt,[v(wt)])],512),[[h,l(b).show.rangInfo]]),o("div",null,[o("span",as,"День: "+i(l(b).day),1),es,o("button",{onClick:e[7]||(e[7]=a=>l(u).dispatch("toNextDay")),class:"btnex"},"Новый день."),ts,l(b).isFinalBtn?(t(),s("button",{key:0,onClick:e[8]||(e[8]=a=>l(u).dispatch("checkQuest","finish_it")),class:"btnex"},"Покинуть Кожанию.")):p("",!0)]),l(b).isTargetAW?(t(),s("p",ss,"Прогноз рекрутов на завтра: "+i(l(u).getters.targetAvailableWarriors),1)):p("",!0),os,o("div",ns,[rs,o("p",ls,i(l(b).messageLog1),1),is,cs,(t(!0),s(c,null,m(l(b).messageLog2,((a,e)=>(t(),s("p",ds,i(l(b).messageLog2[e]),1)))),256))]),us,l(b).isDebug?(t(),s("button",{key:1,onClick:e[9]||(e[9]=a=>l(u).commit("addRep")),class:"btnex"},"+50 rep")):p("",!0),l(b).isDebug?(t(),s("button",{key:2,onClick:e[10]||(e[10]=a=>l(u).commit("addx2Rep")),class:"btnex"},"x2 rep")):p("",!0),l(b).isDebug?(t(),s("button",{key:3,onClick:e[11]||(e[11]=a=>l(u).commit("addRen")),class:"btnex"},"+50 ren")):p("",!0),l(b).isDebug?(t(),s("button",{key:4,onClick:e[12]||(e[12]=a=>l(u).commit("addGold")),class:"btnex"},"x10 gold")):p("",!0),l(b).isDebug?(t(),s("button",{key:5,onClick:e[13]||(e[13]=a=>l(u).commit("addDaemons")),class:"btnex"},"x2 daemons")):p("",!0),l(b).isDebug?(t(),s("button",{key:6,onClick:e[14]||(e[14]=a=>l(u).commit("addArmy")),class:"btnex"},"addArmy")):p("",!0),l(b).isDebug?(t(),s("button",{key:7,onClick:e[15]||(e[15]=a=>l(b).day+=100),class:"btnex"},"+100Days")):p("",!0),ms,l(b).isDebug?(t(),s("button",{key:8,onClick:e[16]||(e[16]=a=>l(u).dispatch("showWhatHiden")),class:"btnex"},"showWhatHiden()")):p("",!0),l(b).isDebug?(t(),s("button",{key:9,onClick:e[17]||(e[17]=a=>l(b).quests.active="take_10_heroes"),class:"btnex"},"finish()")):p("",!0),v(tt)]))}});const gs=b({modules:{Entity:{state:()=>({local:"ru",day:1,gold:1120,lastMonthGoldHist:{Inc:{hunt:[0],reserv:[0],contracts:[0]},Cost:{hire:[0],upg:[0],payday:[0]},other:[0]},goldHist:{Inc:{hunt:{week:0,month:0,all:0},reserv:{week:0,month:0,all:0},contracts:{week:0,month:0,all:0}},Cost:{hire:{week:0,month:0,all:0},upg:{week:0,month:0,all:0},payday:{week:0,month:0,all:0}},Other:{Total:{week:0,month:0,all:0}}},show:{rangInfo:!1},squadState:{paydayleft:6,morality:50,reputation:0},squad:{smerd:6,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},tohire:0,wa:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},wpc:{smerd:12,dubolom:18,warrior:42,veteran:120,knight:500,hero:4e3},wp:{smerd:8,dubolom:14,warrior:32,veteran:50,knight:100,hero:700},wdc:{smerd:44,dubolom:16,warrior:7,veteran:3,knight:2,hero:.01},warriorsdie:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},exp:{smerd:[180,0],dubolom:[600,0],warrior:[1200,0],veteran:[3e3,0],knight:[18e3,0],hero:[1e6,0]},expbaseinc:{smerd:[2,4,8,15],dubolom:[3,7,21,42],warrior:[4,12,24,72],veteran:[6,16,48,108],knight:[6,20,90,270],hero:[0,0,0,0]},expreward:0,squad_imp:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},squadReserved:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},squad_imp_reserv:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},reservCapacity:10,costReservPlace:0,costReservPlacex10:0,radioReservSelect:"all",expReserv:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},reservPaymentCoef:.8,Kojania:{demonicPresence:30,demonicPresenceList:[{num:200,className:"white-grade",text:"редкие одиночные цели"},{num:1e3,className:"green-grade",text:"редкие малые стаи"},{num:2500,className:"yellow-grade",text:"возможны крупные стаи"},{num:5e3,className:"red-grade",text:"орды демонов"},{num:9e3,className:"black-grade",text:"чудовищные орды демонов"}],prosperity:250,prosperityList:[{num:80,className:"black-grade",text:"пепелище"},{num:200,className:"red-grade",text:"восстановление"},{num:1e3,className:"yellow-grade",text:"укрепление"},{num:2500,className:"green-grade",text:"стабильность"},{num:5e3,className:"white-grade",text:"экспансия"}],reputation:0,repSumm:0,reputationGain:[],reputationList:[{num:108,className:"yellow-grade",text:"нейтральные"},{num:250,className:"green-grade",text:"открытые"},{num:1e3,className:"white-grade",text:"теплые"},{num:5e3,className:"white-grade",text:"дружеские"},{num:1e4,className:"white-grade",text:"союзные"}],goldBonus:1,enemyBonus:1,availableWarriors:1,targetAvailableWarriors:2,baseHireCost:140,hirecost:14},questsChanceMlps:{common:1,hard:1,madness:1},messageLog1:"",messageLog2:[],battleReport:{result:{key:0,text:[]},gold:0,exp:0},Dict:{},info:["Демоны -- крайне опасные существа. Даже слабейший из них, за счет невероятной грубой силы и живучести, требует слаженной работы десятка людей. У них множество подвидов с различными особенностями. Но, как правило, дальнобойное оружие и добротные копья делают свое дело. По возможности лучше использовать ловушки и не допускать сближения.","Тушки демонов пользуются хорошим спросом. Почти каждую часть их тела можно считать стратегическим ресурсом. Кроме съедобного мяса это отличные доспехи из кожи. Вполне боеспособные луки и арбалеты из прочных связок. Невероятно огромный список амуниции из костей. Каждый участник охоты или сражения получает часть прибыли с этих трофеев."],quests:{active:"hire_10_smerd",hire_10_smerd:{goal:"Нанять 10 рекрутов",finishText:"Рекруты набираются опыта в бою и на тренировке. При продвижении придется заплатить разовое 2х недельное жалование. Боец улучшит снаряжение и станет сильнее уже в следующем бою.",niceQuestMsgs:["Можно продвигать рекрутов.","Доступны простые контракты."]},found_contract:{goal:"Выполнить контракт.",finishText:"Время от времени будут появляться различные контракты. Их выполнение важно как для Кожании так и для нас. Хотя мы и не обязаны под этим подписываться, без Кожании у нас мало шансов. |Заказчик укажет минимальные требования и ожидаемые проблемы... Реальность же может превзойти самые безумные ожидания. Если мы не хотим потерять все, нам придется быть к этому, по возможности, готовыми.",niceQuestMsgs:["Получено 500 золота.","Доступны сложные контракты."]},take_3000_gold:{goal:"3000 золота и 500 мощи",finishText:"Местный староста -- солидный господин. Он весьма снисходителен к гостям и готов бесплатно предоставлять некоторый уровень безопасности. Правда, вне центральной крепости, которая с каждым днем становится все более массивной. |Под крепостью так же есть развитая подземная инфраструктура, где мы можем выкупить самые надежные места для гарнизона, тем самым расширяя наши возможности.",niceQuestMsgs:["Отдана 1000 золота, отношения улучшились.","Доступен прогноз рекрутов на следующий день.","Доступно резервирование отрядов."]},found_hard_contract:{goal:"Выполнить сложный контракт.",finishText:"На успешность любых предприятий сильно влияет мораль отряда. Особенно при столкновении с превосходящими силами противника. |Люди больше склонны помнить плохое. По возможности стоит сводить человеческие потери к минимуму. Чем больше у нас людей, тем сложнее врагу убить хотя бы одного человека и тем меньше значит его потеря. |Если не считаться с моралью, последствия либо обернутся катастрофой, либо отряд развалится сам по себе.",niceQuestMsgs:["Получено 2000 золота.","Проветание Кожании растет.","Можно продвигать дуболомов."]},take_20_warriors:{goal:"20 воинов и 3000 мощи",finishText:"В Кожании огромные проблемы с металлами. Придется захватить и обустроить рудные шахты, расположенные далеко от поселения. |Для обычных людей это станет чистым самоубийством. Игнорирование проблемы может привевести к еще более худшему результату.",niceQuestMsgs:["Можно продвигать воинов","Доступны безумные контракты."]},take_10_veterans:{goal:"10 ветеранов и 5000 мощи",finishText:"Наша известность работает в обе стороны. |В прославленный отряд присоединяется больше людей и этими людьми проще управлять. Нам доверяют самое лучшие оружие и щедро платят за трофеи. |Однако чем дольше мы сидим на одном месте, тем больше внимания в округе привлекаем. К каждому контракту следует относиться с особой осторожностью.",niceQuestMsg1:"Можно продвигать ветеранов",niceQuestMsgs:["Можно продвигать ветеранов.","Прогноз силы врага в контрактах более точен.","Доход от гарнизона увеличен."]},take_10_knights:{goal:"10 рыцарей и 9000 мощи",finishText:"Туши убитых демонов полны сюрпризов. Металлурги и алхимики делают исключительные открытия и создают невероятные вещи. Конечно, кто-то должен эти туши добыть, как правило ценой своих жизней, а потом кто-то должен с ними как следует поработать. Но в такие времена сам факт прогресса уже вселяет надежду.",niceQuestMsgs:["Можно продвигать рыцарей.","Доход от гарнизона увеличен."]},take_10_heroes:{goal:"10 героев и 40к мощи",finishText:"Мы набрали достаточно силы. Назад дороги не будет.",niceQuestMsgs:["Мы готовы выступить в любой момент!"]},finish_it:{goal:"Отправиться на встречу смерти.",finishText:"",niceQuestMsgs:[""]}},isAvailableContracts:!1,contracts:{common:{isAvailable:!1,generationChance:[12,12],revard:{first:200,loot:20},prosperityChange:6,reputationCnange:8,chancetoLose:[0,10],basePower:50,scaleRange:6},hard:{isAvailable:!1,generationChance:[5,5],revard:{first:600,loot:35},prosperityChange:10,reputationCnange:16,chancetoLose:[0,4],basePower:300,scaleRange:4},madness:{isAvailable:!1,generationChance:[2,2],revard:{first:1800,loot:50},prosperityChange:20,reputationCnange:32,chancetoLose:[0,2],basePower:1e3,scaleRange:3}},contract_list:[],availableContracts:0,contract_is_taken:[0,0,0,0],rangName:{smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герой"},moralEvents:{Victory:[],Defeat:[],smallVictory:[],humanLost:[],powerLost:[]},moralModifiers:{Victory:0,Defeat:0,smallVictory:0,humanLost:0,powerLost:0},moralBattleCoef:0,isTargetAW:!1,isArmyReserving:!1,modalError:!1,modalMission:!1,isStartMessage:!0,modalContracts:!1,modalReservation:!1,modalMoral:!1,modalFinance:!1,finalScore:0,isFinalBtn:!1,isWin:!1,modalFinalScore:!1,modalErrorText:"",modalMissionText:"",modalMissionParagraphs:[],niceQuestMsgs:[],takenContract:{},isDebug:!1}),mutations:{moralManager(a,e){let t=0;for(let n in a.warriorsdie)t+=a.warriorsdie[n]*a.wp[n];let s=t/(e.power+t);if(s>.15){const e=Math.floor(30*s);a.moralEvents.powerLost.push([e,21])}["Victory","smallVictory","Defeat","humanLost","powerLost"].forEach((e=>{a.moralModifiers[e]=0,a.moralEvents[e].forEach(((t,s,o)=>{a.moralModifiers[e]+=t[0],t[1]--,t[1]<=0&&o.splice(s,1)}))}));const o=a.squadState.morality;a.moralBattleCoef=o<25?1-(50-o+(25-o))/100:o<50?1-(50-o)/100:o<75?1+(o-50)/100:1+(o-50+o-75)/100},setDict(a,e){a.Dict=y[e];for(const t in y.en)void 0===a.Dict[t]&&(a.Dict[t]=y.en[t])},toNextDay(a){a.day++,a.squadState.paydayleft--,a.Kojania.demonicPresence+=.01*a.Kojania.demonicPresence+1},hire(a,e){a.squad.smerd+=e,a.gold-=a.Kojania.hirecost*e,a.Kojania.availableWarriors-=e},hire_reset_helper(a,e){a.Kojania.availableWarriors<e&&(a.tohire=a.Kojania.availableWarriors)},buyReservSpace(a,e){a.reservCapacity+=e,a.costReservPlace=50+2.5*(a.reservCapacity-20),a.costReservPlacex10=275+10*(50+2.5*(a.reservCapacity-20))},availableWarriors(a){a.Kojania.availableWarriors=Math.floor(a.Kojania.availableWarriors*Math.min(.3*(1+Math.pow(a.Kojania.prosperity,.5)/100),.8)+Math.random()*Math.pow(a.Kojania.reputation+10,.7)),a.Kojania.availableWarriors<a.tohire&&(a.tohire=a.Kojania.availableWarriors)},rangUp(a,{rang:e,count:t}){switch(a.squad_imp[e]-=t,a.squad[e]-=t,e){case"smerd":a.squad.dubolom+=t;break;case"dubolom":a.squad.warrior+=t;break;case"warrior":a.squad.veteran+=t;break;case"veteran":a.squad.knight+=t;break;case"knight":a.squad.hero+=t}},reputationCalc(a){a.Kojania.repSumm=a.Kojania.reputation+a.squadState.reputation,a.Kojania.repSumm<0&&(a.Kojania.reputation=0,a.Kojania.repSumm=a.Kojania.reputation+a.squadState.reputation),a.Kojania.reputation<50&&(a.Kojania.reputation=50),a.Kojania.hirecost=Math.round(Math.min(14,Math.max(2,a.Kojania.baseHireCost/Math.pow(a.Kojania.repSumm,.5)))),a.Kojania.goldBonus=Math.min(1+Math.pow(a.Kojania.repSumm,.75)/100,7),a.Kojania.enemyBonus=Math.min(1+Math.pow(a.squadState.reputation,.8)/100,20)},reset(a){Object.entries(a.warriorsdie).forEach(((e,t,s)=>{a.warriorsdie[e[0]]=0}))},clearLog(a){a.messageLog1="",a.messageLog2.length=0},summFinance:(a,e)=>{let t=7,s=30;const o=e.split(".");a.goldHist[o[0]][o[1]].all=0,a.goldHist[o[0]][o[1]].week=0,a.goldHist[o[0]][o[1]].month=0;for(let n=a.lastMonthGoldHist[o[0]][o[1]].length-1;n>=0;n--)a.goldHist[o[0]][o[1]].all+=a.lastMonthGoldHist[o[0]][o[1]][n],t>0&&(a.goldHist[o[0]][o[1]].week+=a.lastMonthGoldHist[o[0]][o[1]][n]),s>0&&(a.goldHist[o[0]][o[1]].month+=a.lastMonthGoldHist[o[0]][o[1]][n]),t--,s--},openContractList(a){a.modalContracts=!0},openRangInfo(a){a.show.rangInfo=!0},openReservModal(a){a.modalReservation=!0},openMoralModal(a){a.modalMoral=!0},openFinanceModal(a){a.modalFinance=!0},openFinalScore(a){a.modalFinalScore=!0},error(a,e){a.modalErrorText=e,a.modalError=!0},addGold(a){a.gold*=10},addRep(a){a.Kojania.reputation+=50,console.log(a.Kojania.reputation)},addRen(a){a.squadState.reputation+=50,console.log(a.squadState.reputation)},addx2Rep(a){a.Kojania.reputation*=2,console.log(a.Kojania.reputation)},addDaemons(a){a.Kojania.demonicPresence*=2,console.log(a.Kojania.demonicPresence)},addArmy(a){for(let e in a.squad)a.squad[e]+=2,a.squad[e]*=2}},actions:{async toNextDay({commit:a,state:e,getters:t,dispatch:s}){a("clearLog"),a("toNextDay"),s("financeHelper"),0==e.squadState.paydayleft&&s("time2Pay",t.payday),a("availableWarriors"),s("garnisonManager",t.reservTax),s("checkQuest"),s("generateContracts"),await s("battlesimulation"),a("reputationCalc"),s("contractManager"),a("moralManager",t),(t.morality<0||t.totalPeople+t.totalReserved==0)&&(e.finalScore=Math.floor(t.power*t.Rich/100),isNaN(e.finalScore)&&(e.finalScore=0),e.isWin=!1,e.modalFinalScore=!0),a("reset")},financeHelper({state:a,commit:e}){a.lastMonthGoldHist.Cost.hire[a.day-1]=0,a.lastMonthGoldHist.Inc.reserv[a.day-1]=0,a.lastMonthGoldHist.Inc.hunt[a.day-1]=0,a.lastMonthGoldHist.Inc.contracts[a.day-1]=0,a.lastMonthGoldHist.Cost.upg[a.day-1]=0,a.lastMonthGoldHist.Cost.payday[a.day-1]=0,["Cost.hire","Inc.reserv","Inc.hunt","Inc.contracts","Cost.payday","Cost.upg"].forEach((a=>{e("summFinance",a)}))},garnisonManager({state:a,commit:e},t){a.gold+=t,isNaN(a.lastMonthGoldHist.Inc.reserv[a.day-1])&&(a.lastMonthGoldHist.Inc.reserv[a.day-1]=0),a.lastMonthGoldHist.Inc.reserv[a.day-1]+=t,e("summFinance","Inc.reserv");for(const s in a.squadReserved)if(a.squad_imp_reserv[s]<a.squadReserved[s]&&(a.expReserv[s]+=a.expbaseinc[s][0]*a.squadReserved[s],a.expReserv[s]>a.exp[s][0])){const e=Math.floor(a.expReserv[s]/a.exp[s][0]);a.squad_imp_reserv[s]+=e,a.expReserv[s]-=e*a.exp[s][0]}},time2Pay({state:a,commit:e},t){a.squadState.paydayleft+=7,a.gold-=t,isNaN(a.lastMonthGoldHist.Cost.payday[a.day-1])&&(a.lastMonthGoldHist.Cost.payday[a.day-1]=0),a.lastMonthGoldHist.Cost.payday[a.day-1]-=t,e("summFinance","Cost.payday")},checkQuest({commit:a,state:e,getters:t,dispatch:s},o){let n=e.quests,r=e.squad;switch(n.active){case"hire_10_smerd":r.smerd>=10&&(s("showQuestMsg",n),e.wa.smerd=2,e.wa.dubolom=1,e.isAvailableContracts=!0,e.contracts.common.isAvailable=!0,n.active="found_contract",s("generateContract",{str:"common",minPower:50,recPw:80,rlPw:90,e:0,f:0,g:5,h:5}).then((a=>{e.contract_list.push(a)})));break;case"found_contract":o&&(s("showQuestMsg",n),e.gold+=500,e.contracts.hard.isAvailable=!0,n.active="take_3000_gold");break;case"take_3000_gold":e.gold>3e3&&t.power>500&&(e.gold-=1e3,e.Kojania.reputation+=50,e.isTargetAW=!0,e.reservCapacity=20,e.costReservPlace=50+5*(e.reservCapacity-20),e.costReservPlacex10=275+10*(50+5*(e.reservCapacity-20)),e.isArmyReserving=!0,s("showQuestMsg",n),s("generateContract",{str:"hard",minPower:400,recPw:850,rlPw:1e3,e:0,f:0,g:5,h:5}).then((a=>{e.contract_list.push(a)})),n.active="found_hard_contract");break;case"found_hard_contract":o&&(s("showQuestMsg",n),e.gold+=2e3,e.Kojania.prosperity+=100,e.wa.dubolom=2,e.wa.warrior=1,n.active="take_20_warriors");break;case"take_20_warriors":r.warrior>=20&&t.power>2e3&&(s("showQuestMsg",n),e.wa.warrior=2,e.wa.veteran=1,e.contracts.madness.isAvailable=!0,n.active="take_10_veterans");break;case"take_10_veterans":r.veteran>=10&&t.power>5e3&&(s("showQuestMsg",n),e.wa.veteran=2,e.wa.knight=1,e.reservPaymentCoef=1,n.active="take_10_knights");break;case"take_10_knights":r.knight>=10&&t.power>9e3&&(s("showQuestMsg",n),e.wa.knight=2,e.wa.hero=1,e.reservPaymentCoef=1.2,n.active="take_10_heroes");break;case"take_10_heroes":r.hero>=10&&t.power>2e4&&(s("showQuestMsg",n),n.active="finish_it",e.isFinalBtn=!0);break;case"finish_it":o&&(e.finalScore=t.power*Math.floor(t.Rich/100*3),e.isWin=!0,e.modalFinalScore=!0)}},generateContracts({commit:a,state:e,getters:t,dispatch:s}){let o=e.contracts,n=e.contract_list,r=o.common.generationChance,l=o.common.chancetoLose,i=o.hard.generationChance,c=o.hard.chancetoLose,d=o.madness.generationChance,u=o.madness.chancetoLose;const m=e.Kojania.enemyBonus;if(r[0]=12*e.questsChanceMlps.common,i[0]=5*e.questsChanceMlps.hard,d[0]=2*e.questsChanceMlps.madness,r[1]/100>Math.random()){let a=Math.round((Math.random()*(o.common.scaleRange-1)+1)*o.common.basePower*(1+Math.sqrt(e.Kojania.demonicPresence)/250));const t=Math.round(a*(Math.random()/1.5+1)*m*(1+Math.sqrt(e.Kojania.demonicPresence)/250));s("generateContract",{str:"common",minPower:a,recPw:t,rlPw:Math.round(.9*t*(1+Math.random()*Math.sqrt(e.Kojania.demonicPresence)/250)),e:l[0],f:l[1],g:o.common.prosperityChange,h:o.common.reputationCnange}).then((a=>{n.push(a)})),r[1]-=100}else r[1]=r[1]+r[0];if(i[1]/100>Math.random()){let a=Math.round((Math.random()*(o.hard.scaleRange-1)+1)*o.hard.basePower*(1+Math.sqrt(e.Kojania.demonicPresence)/200));const t=Math.round(a*(Math.random()/1.5+1)*m*(1+Math.random()*Math.sqrt(e.Kojania.demonicPresence)/200));s("generateContract",{str:"hard",minPower:a,recPw:t,rlPw:Math.round(.9*t*(1+Math.random()*Math.sqrt(e.Kojania.demonicPresence)/200)),e:c[0],f:c[1],g:o.hard.prosperityChange,h:o.hard.reputationCnange}).then((a=>{n.push(a)})),i[1]-=100}else i[1]=i[1]+i[0];if(d[1]/100>Math.random()){let a=Math.round((Math.random()*(o.madness.scaleRange-1)+1)*o.madness.basePower*(1+Math.sqrt(e.Kojania.demonicPresence)/120));const t=Math.round(a*(Math.random()/1.5+1)*m*(1+Math.random()*Math.sqrt(e.Kojania.demonicPresence)/120));s("generateContract",{str:"madness",minPower:a,recPw:t,rlPw:Math.round(.9*t*(1+Math.random()*Math.sqrt(e.Kojania.demonicPresence)/120)),e:u[0],f:u[1],g:o.madness.prosperityChange,h:o.madness.reputationCnange}).then((a=>{n.push(a)})),d[1]-=100}else d[1]=d[1]+d[0]},generateContract:(a,{str:e,minPower:t,recPw:s,rlPw:o,e:n,f:r,g:l,h:i})=>({dif:e,minPower:t,recommendedPower:s,realPower:o,chancetoLose:n,changeChance:r,prosperity:l,reputation:i}),contractManager({state:a,dispatch:e}){let t=a.contract_list;a.availableContracts=0;for(const s in t)a.contracts[t[s].dif].isAvailable&&a.availableContracts++,Math.random()<t[s].chancetoLose/100?(a.isDebug&&e("log2","Кожания теряет процветание, "+a.Dict[t[s].dif]+" контракт просрочен."),a.Kojania.prosperity-=t[s].prosperity/2,a.Kojania.prosperity<40&&(a.Kojania.prosperity=40),a.contracts[t[s].dif].isAvailable&&a.availableContracts--,t.splice(s,1)):t[s].chancetoLose+=t[s].changeChance;a.questsChanceMlps.common=Math.min(1+a.day/100,3),a.questsChanceMlps.hard=Math.min(1+a.day/75,6),a.questsChanceMlps.madness=Math.min(1+a.day/50,15)},takeContract({state:a},{contract:e,index:t}){switch(a.takenContract=e,e.dif){case"common":a.contract_is_taken[0]=1,a.contract_is_taken[3]=1;break;case"hard":a.contract_is_taken[1]=1,a.contract_is_taken[3]=1;break;case"madness":a.contract_is_taken[2]=1,a.contract_is_taken[3]=1}a.contract_list.splice(t,1),a.modalContracts--},async battlesimulation({state:a,dispatch:e,getters:t}){if(a.contract_is_taken[3])if(a.takenContract.minPower<t.power){const s=a.takenContract.realPower,o=await e("combatScenario",{enemy:s,ally:t.power});if(a.contract_is_taken[0])if("retreat"==o[0]){e("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:o[1],ep:s,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),e("expGained",3),e("contractIsOver","fail")}else if("very hard"==o[0]){e("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:o[1],ep:s,ep_mlp:1.5,gold:200,goldMlp:.7,reputation:12}),e("expGained",3),e("contractIsOver","win")}else if("hard"==o[0]){e("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт.",dif:o[1],ep:s,ep_mlp:1,gold:200,goldMlp:.7,reputation:5}),e("expGained",2),e("contractIsOver","win")}else e("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:o[1],ep:s,ep_mlp:.4,gold:200,goldMlp:.7,reputation:3}),e("expGained",1),e("contractIsOver","win");else if(a.contract_is_taken[1])if("retreat"==o[0]){e("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:o[1],ep:s,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),e("expGained",3),e("contractIsOver","fail")}else if("very hard"==o[0]){e("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:o[1],ep:s,ep_mlp:1.5,gold:600,goldMlp:.9,reputation:18}),e("expGained",3),e("contractIsOver","win")}else if("hard"==o[0]){e("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт. ",dif:o[1],ep:s,ep_mlp:1,gold:600,goldMlp:.9,reputation:10}),e("expGained",2),e("contractIsOver","win")}else e("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:o[1],ep:s,ep_mlp:.4,gold:600,goldMlp:.9,reputation:8}),e("expGained",1),e("contractIsOver","win");else if("retreat"==o[0]){e("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:o[1],ep:s,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),e("expGained",3),e("contractIsOver","fail")}else if("very hard"==o[0]){e("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:o[1],ep:s,ep_mlp:1.5,gold:1800,goldMlp:1,reputation:30}),e("expGained",3),e("contractIsOver","win")}else if("hard"==o[0]){e("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт. ",dif:o[1],ep:s,ep_mlp:1,gold:1800,goldMlp:1,reputation:20}),e("expGained",2),e("contractIsOver","win")}else e("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:o[1],ep:s,ep_mlp:.4,gold:1800,goldMlp:1,reputation:18}),e("expGained",1),e("contractIsOver","win")}else e("log1","У нас не хватит сил на выполнение контракта."),e("contractIsOver","fail");else{let n=a.Kojania.demonicPresence/a.Kojania.prosperity,r=Math.sqrt(a.Kojania.demonicPresence+100)*n,l=10*r*(1+Math.sqrt(a.squadState.reputation)/10*(1+Math.sqrt(a.Kojania.demonicPresence)/100)),i=(s=r,o=l,Math.random()*(o-s)+s);if(n<1){const a=1-n;if(i<t.power/10){const e=t.power/10;i=Math.min((1+a)*i,e)}}if(t.power>0){let a=await e("combatScenario",{enemy:i,ally:t.power});if("retreat"==a[0]){e("battleResoult",{msg:"Охота обернулась адом для жителей, хотя мы и попытались немного снизить потери.",dif:a[1],ep:i,ep_mlp:2,gold:0,goldMlp:0,reputation:0})}else if("very hard"==a[0]){e("battleResoult",{msg:"Охота превратилась в кровавую битву. Жители благодарны за подаренный им день и готовы щедро заплатить за трофеи.",dif:a[1],ep:i,ep_mlp:1.25,gold:0,goldMlp:1,reputation:8}),e("expGained",3)}else"hard"==a[0]?(e("battleResoult",{msg:"Хоть и было сложно, славная выдалась охота.",dif:a[1],ep:i,ep_mlp:1,gold:0,goldMlp:.7,reputation:3}),e("expGained",2)):"nice battle"==a[0]?(e("battleResoult",{msg:"Небольшие сложности на патруле.",dif:a[1],ep:i,ep_mlp:.6,gold:0,goldMlp:.65,reputation:1}),e("expGained",1)):(e("battleResoult",{msg:"Охота и тренировки прошли гладко.",dif:a[1],ep:i,ep_mlp:.5,gold:0,goldMlp:.6,reputation:.25}),e("expGained",0))}}var s,o},battleResoult({state:a,dispatch:e,commit:t},{msg:s,dif:o,ep:n,ep_mlp:r,gold:l,goldMlp:i,reputation:c}){e("log1",s);const d=Math.round((l+n*i)*a.Kojania.goldBonus);d>0&&(e("log2","Получено золота: "+d),a.gold+=d,0==a.contract_is_taken[3]?(isNaN(a.lastMonthGoldHist.Inc.hunt[a.day-1])&&(a.lastMonthGoldHist.Inc.hunt[a.day-1]=0),a.lastMonthGoldHist.Inc.hunt[a.day-1]+=d,t("summFinance","Inc.hunt")):(isNaN(a.lastMonthGoldHist.Inc.contracts[a.day-1])&&(a.lastMonthGoldHist.Inc.contracts[a.day-1]=0),a.lastMonthGoldHist.Inc.contracts[a.day-1]+=d,t("summFinance","Inc.contracts"))),a.squadState.reputation+=c,e("squadLoses",{dif:o,ep_mlp:r})},squadLoses({state:a,dispatch:e,getters:t},{dif:s,ep_mlp:o}){const n=Object.entries(a.squad);let r=!1;if(n.forEach(((e,t,n)=>{const l=Math.floor(Math.min(n[t][1]*a.wdc[n[t][0]]/100*s*o,n[t][1]));l>0&&(r=!0,a.warriorsdie[n[t][0]]=l),a.squad[n[t][0]]-=l})),r){let s=0;for(var l in e("log2","-----"),e("log2","Потери"),a.warriorsdie)a.squad[l]>0?a.squad_imp[l]-=Math.floor(a.warriorsdie[l]*(a.squad_imp[l]/a.squad[l])):a.squad_imp[l]=0,a.warriorsdie[l]>0&&e("log2",a.rangName[l]+": "+a.warriorsdie[l]),s+=a.warriorsdie[l];e("log2","-----");let o=s/(t.totalPeople+s);if(o>.07){e("log2","Всего погибло: "+s);const t=Math.floor(30*o);a.moralEvents.humanLost.push([t,21]),e("log2","Человеческие потери снижают мораль: "+t)}}},combatScenario({state:a},{enemy:e,ally:t}){let s=e/t*a.moralBattleCoef,o=["",s];return s>=2?(o[0]="retreat",a.moralEvents.Defeat.push([5,14])):o[0]=s>=1?"very hard":s>=.5?"hard":s>.1?"nice battle":"ez battle",s<=2&&s>.2?a.moralEvents.Victory.push([3,14]):s<=2&&a.moralEvents.smallVictory.push([2,5]),o},expGained({state:a,dispatch:e},t){let s=0,o=0,n=a.exp;for(const r in a.exp)for(s=a.expbaseinc[r][t]*(a.squad[r]-a.squad_imp[r]),o+=s,n[r][1]+=s;n[r][1]>n[r][0];)a.squad_imp[r]++,n[r][1]-=n[r][0];o>0&&e("log2","Общий опыт: "+o)},rangUp({state:a,commit:e},{rang:t,count:s}){a.gold>s*a.wpc[t]*2?(e("rangUp",{rang:t,count:s}),a.gold-=s*a.wpc[t]*2,isNaN(a.lastMonthGoldHist.Cost.upg[a.day-1])&&(a.lastMonthGoldHist.Cost.upg[a.day-1]=0),a.lastMonthGoldHist.Cost.upg[a.day-1]-=s*a.wpc[t]*2,e("summFinance","Cost.upg")):e("error","Нужно больше золота.")},takeReserve({state:a,dispatch:e},{mode:t,name:s}){if("all"==t)a.squad[s]+=a.squadReserved[s],a.squadReserved[s]=0,a.squad_imp[s]+=a.squad_imp_reserv[s],a.squad_imp_reserv[s]=0;else if("rangUp"==t)a.squad[s]+=a.squad_imp_reserv[s],a.squadReserved[s]-=a.squad_imp_reserv[s],a.squad_imp[s]+=a.squad_imp_reserv[s],a.squad_imp_reserv[s]=0;else{let e=a.squadReserved[s]-a.squad_imp_reserv[s];a.squadReserved[s]-=e,a.squad[s]+=e}},takeSquad({state:a,dispatch:e,getters:t},{mode:s,name:o}){if("all"==s){const e=a.reservCapacity-t.totalReserved;let s=Math.max(Math.min(a.squad[o],e),e);s=Math.min(s,a.squad[o]);let n=a.squad_imp[o];s<n&&(n=s),n=Math.min(s,n),a.squad_imp_reserv[o]+=n,a.squad_imp[o]-=n,a.squadReserved[o]+=s,a.squad[o]-=s}else if("rangUp"==s){const e=a.reservCapacity-t.totalReserved;let s=Math.min(a.squad_imp[o],e);a.squad_imp_reserv[o]+=s,a.squad_imp[o]-=s,a.squadReserved[o]+=s,a.squad[o]-=s}else{const e=a.reservCapacity-t.totalReserved;let s=a.squad[o]-a.squad_imp[o],n=Math.min(s,e);a.squadReserved[o]+=n,a.squad[o]-=n}},contractIsOver({state:a,dispatch:e},t){a.contract_is_taken.forEach(((a,e,t)=>{t[e]=0})),"win"==t?(a.Kojania.prosperity*=1+a.takenContract.prosperity/100,a.Kojania.reputation+=a.takenContract.reputation,e("log2","Контракт выполнен."),"common"==a.takenContract.dif&&e("checkQuest","found_contract"),"hard"==a.takenContract.dif&&e("checkQuest","found_hard_contract")):"fail"==t?(a.Kojania.prosperity*=1-1.5*a.takenContract.prosperity/100,a.Kojania.reputation-=2*a.takenContract.reputation,e("log2","Контракт провален.")):a.Kojania.prosperity*=1-a.takenContract.prosperity/2/100},log1({state:a},e){a.messageLog1=e},log2({state:a},e){a.messageLog2.push(e)},showWhatHiden({state:a}){console.log(a.contract_list)},showQuestMsg({dispatch:a},e){a("finishMissionMessage",{text:e[e.active].finishText,msg:e[e.active].niceQuestMsgs})},finishMissionMessage({state:a},{text:e,msg:t}){a.modalMissionParagraphs=e.split("|"),a.modalMission=!0,a.niceQuestMsgs=t},hire({commit:a,state:e},t){a("hire_reset_helper",1),e.gold>=e.Kojania.hirecost*t&&e.Kojania.availableWarriors>0?(a("hire",t),isNaN(e.lastMonthGoldHist.Cost.hire[e.day-1])&&(e.lastMonthGoldHist.Cost.hire[e.day-1]=0),e.lastMonthGoldHist.Cost.hire[e.day-1]-=e.Kojania.hirecost*t,a("summFinance","Cost.hire")):e.Kojania.availableWarriors>0?a("error","Нужно больше золота."):a("error","Рекруты закончились. Возможно завтра будут новые."),a("hire_reset_helper",1)},buyReservSpace({commit:a,state:e},t){e.costReservPlace=50+2.5*(e.reservCapacity-20),e.costReservPlacex10=275+10*(50+2.5*(e.reservCapacity-20)),1==t&&e.costReservPlace<e.gold?(a("buyReservSpace",t),e.gold-=e.costReservPlace):1==t&&a("error","Нужно больше золота."),10==t&&e.costReservPlacex10<e.gold?(a("buyReservSpace",t),e.gold-=e.costReservPlacex10):10==t&&a("error","Нужно больше золота.")}},getters:{payday:(a,e)=>{let t=0,s=0;for(let o in a.squad)t+=a.squad[o]*a.wpc[o];for(let o in a.squadReserved)s+=a.squadReserved[o]*a.wpc[o];return t+s},power:(a,e)=>{let t=0;for(let s in a.squad)t+=a.squad[s]*a.wp[s];return t},totalPeople:a=>{let e=0;for(let t in a.squad)e+=a.squad[t];return e},demonicPresence:(a,e)=>{for(const t of a.Kojania.demonicPresenceList)if(Math.min(9e3,a.Kojania.demonicPresence)<=t.num)return[t.text,t.className]},kojaniaReputation:(a,e)=>{for(const t of a.Kojania.reputationList)if(Math.min(1e4,a.Kojania.repSumm)<=t.num)return[t.text,t.className]},kojaniaProsperity:(a,e)=>{for(const t of a.Kojania.prosperityList)if(Math.min(5e3,a.Kojania.prosperity)<=t.num)return[t.text,t.className]},targetAvailableWarriors:(a,e)=>Math.floor(a.Kojania.availableWarriors*Math.min(.3*(1+Math.pow(a.Kojania.prosperity,.5)/100),.8)+Math.pow(a.Kojania.reputation+10,.7)/2),totalReserved:(a,e)=>{let t=0;for(let s in a.squadReserved)t+=a.squadReserved[s];return t},reservTax:(a,e)=>{let t=0;for(let s in a.squadReserved)t+=a.squadReserved[s]*a.wpc[s]*(a.reservPaymentCoef/7);return Math.round(t)},reservExp:(a,e)=>{let t=0;for(let s in a.squadReserved)t+=a.squadReserved[s]*a.expbaseinc[s][0];return Math.round(t)},moralRenown:a=>Math.floor(Math.pow(a.squadState.reputation,.6)),moralDept:(a,e)=>{let t=0;return a.gold<0&&(t=Math.floor(a.gold/e.payday*20)),Math.max(-100,t)},moralSquadSize:(a,e)=>Math.floor(Math.pow(e.totalPeople,.6)/1.5),moralRich:(a,e)=>{let t;return t=a.gold>0?(a.gold-e.payday)/e.payday:0,t=Math.floor(5*t),Math.min(20,t)},morality:(a,e)=>Math.min(50+a.moralModifiers.Victory+a.moralModifiers.smallVictory+e.moralRenown+e.moralRich-a.moralModifiers.humanLost-a.moralModifiers.powerLost-a.moralModifiers.Defeat+e.moralDept-e.moralSquadSize,100),Rich:(a,e)=>{let t;return t=Math.floor((a.gold-e.payday)/e.payday),console.log(t),t=Math.max(t,1),t}}}}});f(hs).use(gs).mount("#app");
