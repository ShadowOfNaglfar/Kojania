import{u as e,c as a,o as t,a as o,b as s,w as r,v as n,d as l,t as i,F as c,e as d,f as u,r as m,g as p,h as g,n as h,i as v,j as b,k as f}from"./vendor.71af84ca.js";const w={ru:{common:"обычный",hard:"сложный",madness:"безумный",goal:"Текущая цель",Status:"Положение дел",Gold:"Золото",Payday:"Дней до выплаты",Moral:"Мораль",Renown:"Известность",smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герои",smerds:"Рекруты",duboloms:"Дуболомы",warriors:"Воины",veterans:"Ветераны",knights:"Рыцари",heroes:"Герои"},en:{common:"common",hard:"hard",madness:"madness",goal:"Current target",Status:"Status",Gold:"Gold",Payday:"Days to payday",Moral:"Moral",Renown:"Renown",smerd:"smerd",dubolom:"dubolom",warrior:"warrior",veteran:"veteran",knight:"knight",hero:"hero",smerds:"smerds",duboloms:"duboloms",warriors:"warriors",veterans:"veterans",knights:"knights",heroes:"heroes"}};const k=["max"];const y={},M=Object.assign(y,{setup:function(d){const u=e(),m=a((()=>u.state.Entity));return(e,a)=>(t(),o(c,null,[s("div",null,[r(s("input",{type:"range",class:"hire",min:"0",max:l(m).Kojania.availableWarriors,"onUpdate:modelValue":a[0]||(a[0]=e=>l(m).tohire=e)},null,8,k),[[n,l(m).tohire,void 0,{number:!0}]]),s("button",{onClick:a[1]||(a[1]=e=>l(m).tohire=l(m).Kojania.availableWarriors),id:"allBtn"},"max")]),s("p",null,"К найму: "+i(l(m).tohire)+" || На сумму: "+i(l(m).tohire*l(m).Kojania.hirecost),1),s("button",{onClick:a[2]||(a[2]=e=>l(u).dispatch("hire",l(m).tohire)),id:"hireBtn"},"Нанять")],64))}});const _=s("br",null,null,-1),C=d(" | "),R=s("br",null,null,-1),q=s("label",{for:"rangUp"},"готовых к повешению",-1),x=s("br",null,null,-1),j=s("label",{for:"rangDown"},"не готовых к повышению ",-1),P=s("br",null,null,-1),L=s("label",{for:"all"},"всех",-1),K=s("div",null,null,-1),S=s("hr",{id:"niceLine2"},null,-1);const D={data:()=>({dictS:{smerd:"smerds",dubolom:"duboloms",warrior:"warriors",veteran:"veterans",knight:"knights",hero:"heroes"}}),props:["name"],methods:{}},T=Object.assign(D,{setup:function(n){const c=e(),m=a((()=>c.state.Entity));return(e,a)=>(t(),o("div",null,[s("div",null,[s("div",null,[d(i(l(m).Dict[e.dictS[n.name]])+":",1),_,d(" В отряде: "+i(l(m).squad[n.name])+" / "+i(l(m).squad_imp[n.name])+"↑ | В резерве: "+i(l(m).squadReserved[n.name])+" / "+i(l(m).squad_imp_reserv[n.name])+"↑ "+i()+" ",1),s("div",null,[s("button",{class:"closeCartButton min-w40",onClick:a[0]||(a[0]=e=>l(c).dispatch("takeReserve",{mode:l(m).radioReservSelect,name:n.name}))},"Забрать"),C,s("button",{class:"closeCartButton min-w40",onClick:a[1]||(a[1]=e=>l(c).dispatch("takeSquad",{mode:l(m).radioReservSelect,name:n.name}))},"Отослать"),R,r(s("input",{class:"radio",type:"radio","onUpdate:modelValue":a[2]||(a[2]=e=>l(m).radioReservSelect=e),name:"smerd",value:"rangUp",id:"rangUp"},null,512),[[u,l(m).radioReservSelect]]),q,x,r(s("input",{class:"radio",type:"radio","onUpdate:modelValue":a[3]||(a[3]=e=>l(m).radioReservSelect=e),name:"smerd",value:"rangDown",id:"rangDown"},null,512),[[u,l(m).radioReservSelect]]),j,P,r(s("input",{class:"radio",type:"radio","onUpdate:modelValue":a[4]||(a[4]=e=>l(m).radioReservSelect=e),name:"smerd",value:"all",id:"all"},null,512),[[u,l(m).radioReservSelect]]),L])]),K]),S]))}});const N={key:0,class:"modal-mask"},E={class:"modal-wrapper"},I={class:"modal-position"},W={id:"contracts-block"},A={id:"contractTable"},G=s("tr",null,[s("th",null,"Тип"),s("th",null,"Мин. мощь"),s("th",null,"Реком. мощь"),s("th")],-1),B={key:0},O=["onClick"],Q={class:"modal-mask"},V={class:"modal-wrapper"},U={class:"modal-position"},F={id:"mission-block"},z={id:"plus"},H=s("hr",null,null,-1),$={class:"missionText"},J=s("br",null,null,-1),X={class:"modal-mask"},Y={class:"modal-wrapper"},Z={class:"modal-position"},ee={id:"reserv-block"},ae=["onClick","disabled"],te={key:0},oe={key:1},se=s("p",{style:{"margin-top":"8px"}},"Общий резерв:",-1),re=s("hr",null,null,-1),ne=s("p",null,"Расширение гарнизона:",-1),le=d(" | "),ie=s("hr",null,null,-1),ce={class:"modal-mask"},de={class:"modal-wrapper"},ue={class:"modal-position"},me={id:"moral-block"},pe=d(" Изменения морали:"),ge=s("br",null,null,-1),he=s("div",null,[s("span",{class:"floatL"},"Базовая:"),s("span",{class:"floatR"},"50")],-1),ve=s("br",null,null,-1),be={key:0},fe=s("span",{class:"floatL"},"Известность:",-1),we={class:"floatR"},ke=s("br",null,null,-1),ye={key:1},Me=s("span",{class:"floatL"},"Победы:",-1),_e={class:"floatR"},Ce=s("br",null,null,-1),Re={key:2},qe=s("span",{class:"floatL"},"Спокойные дни:",-1),xe={class:"floatR"},je=s("br",null,null,-1),Pe={key:3},Le=s("span",{class:"floatL"},"Богатство:",-1),Ke={class:"floatR"},Se=s("br",null,null,-1),De=s("hr",null,null,-1),Te={key:4},Ne=s("span",{class:"floatL"},"Поражения:",-1),Ee={class:"floatR"},Ie=s("br",null,null,-1),We={key:5},Ae=s("span",{class:"floatL"},"Человеческие потери:",-1),Ge={class:"floatR"},Be=s("br",null,null,-1),Oe={key:6},Qe=s("span",{class:"floatL"},"Боевоя мощь утрачена:",-1),Ve={class:"floatR"},Ue=s("br",null,null,-1),Fe={key:7},ze=s("span",{class:"floatL"},"Долг людям:",-1),He={class:"floatR"},$e=s("br",null,null,-1),Je={key:8},Xe=s("span",{class:"floatL"},"Размер отряда:",-1),Ye={class:"floatR"},Ze=s("br",null,null,-1),ea={class:"modal-mask"},aa={class:"modal-wrapper"},ta={class:"modal-position"},oa={id:"finance-block"},sa={class:"modal-mask"},ra=[s("div",{class:"modal-wrapper"},[s("div",{class:"modal-position"},[s("div",{id:"final-score-block"})])],-1)],na={class:"modal-mask"},la={class:"modal-wrapper"},ia={class:"modal-position"},ca={id:"error-block"},da=s("br",null,null,-1);const ua={data:()=>({currentTab:"smerd",tabs:["smerd","dubolom","warrior","veteran","knight","hero"]})},ma=Object.assign(ua,{setup:function(n){const u=e(),b=a((()=>u.state.Entity));return(e,a)=>(t(),o(c,null,[l(b).modalContracts?(t(),o("div",N,[s("div",E,[s("div",I,[s("div",W,[s("table",A,[G,(t(!0),o(c,null,m(l(b).contract_list,((e,a)=>(t(),o("tbody",null,[l(b).contracts[e.dif].isAvailable?(t(),o("tr",B,[s("td",null,i(l(b).Dict[e.dif]),1),s("td",null,i(e.minPower),1),s("td",null,i(e.recommendedPower),1),s("td",null,[s("button",{class:"closeCartButton",onClick:t=>l(u).dispatch("takeContract",{contract:e,index:a})},"Принять",8,O)])])):p("",!0)])))),256))]),s("button",{class:"closeCartButton",onClick:a[0]||(a[0]=e=>l(b).modalContracts--)},"Пожалуй не сейчас...")])])])])):p("",!0),r(s("div",Q,[s("div",V,[s("div",U,[s("div",F,[(t(!0),o(c,null,m(l(b).niceQuestMsgs,((e,a)=>(t(),o("p",z,i(e),1)))),256)),H,s("p",$,i(l(b).modalMissionText),1),J,s("button",{class:"closeCartButton",onClick:a[1]||(a[1]=e=>l(b).modalMission--)},"Понимаю")])])])],512),[[g,l(b).modalMission]]),r(s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[(t(!0),o(c,null,m(e.tabs,((a,s)=>(t(),o("button",{key:a,class:h(["tab-button",{active:e.currentTab===a}]),onClick:t=>e.currentTab=a,disabled:!(l(b).wa[a]>0)},[l(b).wa[a]>0?(t(),o("span",te,i(l(b).rangName[a])+i(),1)):(t(),o("span",oe,"???"))],10,ae)))),128)),se,d(" "+i(l(u).getters.totalReserved)+" из "+i(l(b).reservCapacity)+" ",1),s("p",null,"Ежедневный доход от гарнизона: "+i(l(u).getters.reservTax),1),s("p",null,"Ежедневный опыт гарнизона: "+i(l(u).getters.reservExp),1),re,v(T,{name:e.currentTab},null,8,["name"]),ne,s("button",{class:"closeCartButton min-w40",onClick:a[2]||(a[2]=e=>l(u).dispatch("buyReservSpace",1))},"+1 "),le,s("button",{class:"closeCartButton min-w40",onClick:a[3]||(a[3]=e=>l(u).dispatch("buyReservSpace",10))},"+10"),s("p",null,"Цена 1 места: "+i(l(b).costReservPlace),1),s("p",null,"Цена 10 мест: "+i(l(b).costReservPlacex10),1),ie,s("button",{class:"closeCartButton",onClick:a[4]||(a[4]=e=>l(b).modalReservation--)},"Готово")])])])],512),[[g,l(b).modalReservation]]),r(s("div",ce,[s("div",de,[s("div",ue,[s("div",me,[pe,ge,s("div",null,[he,ve,l(u).getters.moralRenown>0?(t(),o("div",be,[fe,s("span",we,"+"+i(l(u).getters.moralRenown),1),ke])):p("",!0),l(b).moralModifiers.Victory>0?(t(),o("div",ye,[Me,s("span",_e,"+"+i(l(b).moralModifiers.Victory),1),Ce])):p("",!0),l(b).moralModifiers.smallVictory>0?(t(),o("div",Re,[qe,s("span",xe,"+"+i(l(b).moralModifiers.smallVictory),1),je])):p("",!0),l(u).getters.moralRich>0?(t(),o("div",Pe,[Le,s("span",Ke,"+"+i(l(u).getters.moralRich),1),Se])):p("",!0),De,l(b).moralModifiers.Defeat>0?(t(),o("div",Te,[Ne,s("span",Ee,"-"+i(l(b).moralModifiers.Defeat),1),Ie])):p("",!0),l(b).moralModifiers.humanLost>0?(t(),o("div",We,[Ae,s("span",Ge,"-"+i(l(b).moralModifiers.humanLost),1),Be])):p("",!0),l(b).moralModifiers.powerLost>0?(t(),o("div",Oe,[Qe,s("span",Ve,"-"+i(l(b).moralModifiers.powerLost),1),Ue])):p("",!0),l(b).moralModifiers.powerLost<0?(t(),o("div",Fe,[ze,s("span",He,i(l(u).getters.moralDept),1),$e])):p("",!0),l(u).getters.moralSquadSize>0?(t(),o("div",Je,[Xe,s("span",Ye,"-"+i(l(u).getters.moralSquadSize),1),Ze])):p("",!0)]),s("button",{class:"closeCartButton",onClick:a[5]||(a[5]=e=>l(b).modalMoral--)},"Готово")])])])],512),[[g,l(b).modalMoral]]),r(s("div",ea,[s("div",aa,[s("div",ta,[s("div",oa,[s("button",{class:"closeCartButton",onClick:a[6]||(a[6]=e=>l(b).modalFinance--)},"Готово")])])])],512),[[g,l(b).modalFinance]]),r(s("div",sa,ra,512),[[g,l(b).modalFinalScore]]),r(s("div",na,[s("div",la,[s("div",ia,[s("div",ca,[d(i(l(b).modalErrorText)+" ",1),da,s("button",{class:"closeCartButton",onClick:a[7]||(a[7]=e=>l(b).modalError--)},"Понимаю")])])])],512),[[g,l(b).modalError]])],64))}});const pa={class:"tab"},ga={class:"row"},ha=s("hr",{id:"niceLine"},null,-1),va={class:"rangSpecifics"},ba={class:"rangText",id:"plus"},fa={class:"rangText",id:"minus"},wa=s("br",null,null,-1),ka=["src"],ya=s("hr",{id:"niceLine2"},null,-1),Ma={class:"rangText",id:"rangText"};const _a={data:()=>({rangInfo:{smerd:{info:"Иногда попадаются толковые ребята. Но в среднем -- пушечное мясо, готовое обмочить штанишки при виде чуть грозного противника.",plus:["Дешевый","Легко обучается"],minus:["Массово гибнет"],url:"1"},dubolom:{info:"Дуболом отличился высоким боевым духом. Мастерство и экипировка все еще могут оставлять желать лучшего, но, по крайней мере, он не подводет в сложный и отвественный момент.",plus:["Неприхотлив","Обучение без рисков"],minus:["Слегка высокая смертность"],url:"2"},warrior:{info:"Воин звучит гордо. Хорошие навыки, разнообразное и качественное снаряжение, а так же непоколебимость -- это звание получают не просто так.",plus:["Сильный боец","Низкая смертность"],minus:["Обучение в бою"],url:"3"},veteran:{info:"Ветераны нашли способ пройти путь воина и сохранить большую из своих частей тела. Приобрели внушительную гибкость в снаряжении и умение выпутываться из сложной ситуации. Великолепные боевые навыки. Готовность успешно выполнить любой, самый безумный приказ. Хотя и это не предел.",plus:["Сильный боец","Очень низкая смертность"],minus:["Высокое содержание","Обучение в бою"],url:"4"},knight:{info:"Человеческая элита, лучшие из лучших. Без отваги на поле боя, граничащей с безумием, до этого ранга не дойти. Самые лучшие трофеи, в первую очередь, попадут в их загребущие до интересностей рученки. Качество их снаряжения, как и расходы в золоте, взлетают до запредельного уровня.",plus:["Очень сильный боец","Крайне живучий гад"],minus:["Очень высокое содержание","Обучается в сложных битвах"],url:"5"},hero:{info:"Специализация героев может быть самой разной. Умения на грани здравого смысла. Сотни и тысячи поверженных врагов на личном счету. Различные могущественные артефакты -- все это обязательные атрибуты Героев.",plus:["Сила не поддается описанию","Условно бессмертен"],minus:["Безумно сложное обучение"],url:"6"}},rangName:{smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герой"}}),props:["name"],methods:{}},Ca=Object.assign(_a,{setup:function(r){const n=e(),d=a((()=>n.state.Entity));return(e,a)=>{return t(),o("div",pa,[s("div",ga,[s("div",null,[s("h2",null,i(l(d).rangName[r.name]),1),ha,s("div",va,[(t(!0),o(c,null,m(e.rangInfo[r.name].plus,(e=>(t(),o("p",ba,"+ "+i(e),1)))),256)),(t(!0),o(c,null,m(e.rangInfo[r.name].minus,(e=>(t(),o("p",fa,"- "+i(e),1)))),256)),wa,s("p",null,"Cодержание: "+i(l(d).wpc[r.name]),1)])]),s("div",null,[s("div",null,[s("img",{id:"pic",src:(n=e.rangInfo[r.name].url,new URL({"./rang-avarars/1.png":"/Kojania/assets/1.ea454ab5.png","./rang-avarars/2.png":"/Kojania/assets/2.c8991c68.png","./rang-avarars/3.png":"/Kojania/assets/3.72bd031c.png","./rang-avarars/4.png":"/Kojania/assets/4.7cf7f6ff.png","./rang-avarars/5.png":"/Kojania/assets/5.30a644bf.png","./rang-avarars/6.png":"/Kojania/assets/6.bd119c05.png"}[`./rang-avarars/${n}.png`],window.location).href),alt:"",srcset:""},null,8,ka)])])]),ya,s("p",Ma,i(e.rangInfo[r.name].info),1),s("button",{class:"closeCartButton",onClick:a[0]||(a[0]=e=>l(d).show.rangInfo=!1)},"Закрыть")]);var n}}});const Ra={class:"modal-position",style:{"margin-left":"-185px"}},qa={id:"tab-buttons-cont"},xa=["onClick","disabled"],ja={key:0},Pa={key:1};const La={components:{RangCart:Ca},data:()=>({currentTab:"smerd",tabs:["smerd","dubolom","warrior","veteran","knight","hero"]})},Ka=Object.assign(La,{setup:function(r){const n=e(),d=a((()=>n.state.Entity));return(e,a)=>(t(),o("div",Ra,[s("div",qa,[(t(!0),o(c,null,m(e.tabs,((a,s)=>(t(),o("button",{key:a,class:h(["tab-button",{active:e.currentTab===a}]),onClick:t=>e.currentTab=a,disabled:!(l(d).wa[a]>0)},[l(d).wa[a]>0?(t(),o("span",ja,i(l(d).rangName[a])+i(),1)):(t(),o("span",Pa,"???"))],10,xa)))),128))]),v(Ca,{name:e.currentTab},null,8,["name"])]))}});const Sa={id:"content"},Da={id:"localContainerPositioner"},Ta={id:"local"},Na={id:"goalContainerPositioner"},Ea={id:"goalContainer"},Ia={align:"left"},Wa={id:"globalInfoRow"},Aa=s("hr",{class:"svl"},null,-1),Ga=s("hr",{class:"svl"},null,-1),Ba=s("hr",null,null,-1),Oa={id:"globalInfoRow"},Qa=s("hr",{class:"svl"},null,-1),Va=s("hr",{class:"svl"},null,-1),Ua={id:"contentPositioner"},Fa={class:"kojaniaCont"},za=s("h3",null,"Кожания",-1),Ha=d("Отношения: "),$a=d("Уровень процветания: "),Ja=d(" Демоническая угроза: "),Xa=d("Цена рекрута: "),Ya=s("br",null,null,-1),Za={class:"squadCont"},et=s("h3",null,"Состав отряда",-1),at={class:"squadList"},tt={key:0},ot=["onClick","toolTip"],st=["onClick","toolTip"],rt=["onClick","toolTip"],nt=["onClick","toolTip"],lt=s("br",null,null,-1),it={class:"modal-mask"},ct={class:"modal-wrapper"},dt={id:"day"},ut=s("br",null,null,-1),mt={key:0},pt=s("hr",null,null,-1),gt={id:"eventLogCont"},ht=s("h3",null,"События",-1),vt={class:"ml"},bt=d(" ..."),ft=s("br",null,null,-1),wt={class:"ml"},kt=s("hr",null,null,-1),yt=s("br",null,null,-1);const Mt={data:()=>({local:"ru"}),methods:{l10n(e){return"en"==this.local&&void 0===w[this.local][e]?e:w[this.local][e]}}},_t=Object.assign(Mt,{setup:function(n){const u=e(),b=a((()=>u.state.Entity));return u.commit("setDict","ru"),(e,a)=>(t(),o("div",Sa,[s("div",Da,[s("div",Ta,[l(b).isDebug?(t(),o("button",{key:0,onClick:a[0]||(a[0]=e=>l(u).commit("setDict","en")),class:"btnex"},"en")):p("",!0),l(b).isDebug?(t(),o("button",{key:1,onClick:a[1]||(a[1]=e=>l(u).commit("setDict","ru")),class:"btnex"},"ru")):p("",!0)])]),s("div",Na,[s("div",Ea,[s("h3",null,i(l(b).Dict.goal),1),s("p",null,i(l(b).quests[l(b).quests.active].goal),1)])]),s("div",null,[s("h3",Ia,i(l(b).Dict.Status),1)]),s("div",Wa,[s("p",null,i(l(b).Dict.Gold)+": "+i(l(b).gold),1),Aa,s("p",null,i(l(b).Dict.Moral)+": "+i(l(u).getters.morality),1),s("button",{class:"moralButton",onClick:a[2]||(a[2]=e=>l(u).commit("openMoralModal"))},"▼"),Ga,s("p",null,i(l(b).Dict.Renown)+": "+i(Math.floor(l(b).squadState.reputation)),1)]),Ba,s("div",Oa,[s("p",null,i(l(b).Dict.Payday)+": "+i(l(b).squadState.paydayleft),1),Qa,s("p",null,"Жалование: "+i(l(u).getters.payday),1),Va,s("button",{onClick:a[3]||(a[3]=e=>l(u).commit("openFinanceModal"))},"Финансы")]),s("div",Ua,[s("div",Fa,[za,s("p",null,[Ha,s("span",{class:h(l(u).getters.kojaniaReputation[1])},i(l(u).getters.kojaniaReputation[0]),3)]),s("p",null,[$a,s("span",{class:h(l(u).getters.kojaniaProsperity[1])},i(l(u).getters.kojaniaProsperity[0]),3)]),s("p",null,[Ja,s("span",{class:h(l(u).getters.demonicPresence[1])},i(l(u).getters.demonicPresence[0]),3)]),s("p",null,[Xa,s("span",null,i(l(b).Kojania.hirecost),1)]),s("p",null,"Свободные рекруты: "+i(l(b).Kojania.availableWarriors),1),v(M),Ya,r(s("div",null,[s("p",null,"Контракты: "+i(l(b).availableContracts),1),r(s("button",{onClick:a[4]||(a[4]=e=>l(u).commit("openContractList"))},"Прием контрактов",512),[[g,l(b).availableContracts>0]])],512),[[g,l(b).isAvailableContracts&&!l(b).contract_is_taken[3]]]),r(s("p",null,"Принят контракт",512),[[g,l(b).contract_is_taken[0]]]),r(s("p",null,"Принят сложный контракт",512),[[g,l(b).contract_is_taken[1]]]),r(s("p",null,"Принят безумный контракт",512),[[g,l(b).contract_is_taken[2]]])]),s("div",Za,[et,(t(!0),o(c,null,m(l(b).squad,((e,a)=>(t(),o("p",at,[e>0?(t(),o("div",tt,[d(i(l(b).rangName[a])+": "+i(e)+" ",1),l(b).squad_imp[a]>0&&l(b).wa[a]>1?(t(),o("button",{key:0,onClick:e=>l(u).dispatch("rangUp",{rang:a,count:1}),toolTip:"Стоимость: "+2*l(b).wpc[a],class:"tooltip"}," 1+ ",8,ot)):p("",!0),l(b).squad_imp[a]>=10&&l(b).wa[a]>1?(t(),o("button",{key:1,onClick:e=>l(u).dispatch("rangUp",{rang:a,count:10}),toolTip:"Стоимость: "+2*l(b).wpc[a]*10,class:"tooltip"}," 10+ ",8,st)):p("",!0),l(b).squad_imp[a]>=100&&l(b).wa[a]>1?(t(),o("button",{key:2,onClick:e=>l(u).dispatch("rangUp",{rang:a,count:100}),toolTip:"Стоимость: "+2*l(b).wpc[a]*100,class:"tooltip"}," 100+ ",8,rt)):p("",!0),l(b).squad_imp[a]>1&&l(b).wa[a]>1?(t(),o("button",{key:3,onClick:e=>l(u).dispatch("rangUp",{rang:a,count:l(b).squad_imp[a]}),toolTip:"Стоимость: "+l(b).squad_imp[a]*l(b).wpc[a]*2,class:"tooltip"},i(l(b).squad_imp[a])+"+ ",9,nt)):p("",!0)])):p("",!0)])))),256)),lt,s("p",null,"Всего людей: "+i(l(u).getters.totalPeople),1),s("p",null,"Боевая мощь: "+i(l(u).getters.power),1),l(b).wa.smerd>0?(t(),o("button",{key:0,onClick:a[5]||(a[5]=e=>l(u).commit("openRangInfo"))},"? о рангах")):p("",!0),l(b).isArmyReserving?(t(),o("button",{key:1,onClick:a[6]||(a[6]=e=>l(u).commit("openReservModal")),class:"btnex"},"Резерв")):p("",!0)])]),r(s("div",it,[s("div",ct,[v(Ka)])],512),[[g,l(b).show.rangInfo]]),s("div",null,[s("span",dt,"День: "+i(l(b).day),1),ut,s("button",{onClick:a[7]||(a[7]=e=>l(u).dispatch("toNextDay")),class:"btnex"},"Завершение дня.")]),l(b).isTargetAW?(t(),o("p",mt,"Прогноз рекрутов на завтра: "+i(l(u).getters.targetAvailableWarriors),1)):p("",!0),pt,s("div",gt,[ht,s("p",vt,i(l(b).messageLog1),1),bt,ft,(t(!0),o(c,null,m(l(b).messageLog2,((e,a)=>(t(),o("p",wt,i(l(b).messageLog2[a]),1)))),256))]),kt,l(b).isDebug?(t(),o("button",{key:1,onClick:a[8]||(a[8]=e=>l(u).commit("addRep")),class:"btnex"},"+50 rep")):p("",!0),l(b).isDebug?(t(),o("button",{key:2,onClick:a[9]||(a[9]=e=>l(u).commit("addx2Rep")),class:"btnex"},"x2 rep")):p("",!0),l(b).isDebug?(t(),o("button",{key:3,onClick:a[10]||(a[10]=e=>l(u).commit("addRen")),class:"btnex"},"+50 ren")):p("",!0),l(b).isDebug?(t(),o("button",{key:4,onClick:a[11]||(a[11]=e=>l(u).commit("addGold")),class:"btnex"},"x10 gold")):p("",!0),l(b).isDebug?(t(),o("button",{key:5,onClick:a[12]||(a[12]=e=>l(u).commit("addDaemons")),class:"btnex"},"x2 daemons")):p("",!0),l(b).isDebug?(t(),o("button",{key:6,onClick:a[13]||(a[13]=e=>l(u).commit("addArmy")),class:"btnex"},"addArmy")):p("",!0),yt,l(b).isDebug?(t(),o("button",{key:7,onClick:a[14]||(a[14]=e=>l(u).dispatch("showWhatHiden")),class:"btnex"},"showWhatHiden()")):p("",!0),v(ma)]))}});const Ct=b({modules:{Entity:{state:()=>({local:"ru",day:1,gold:1120,show:{rangInfo:!1},squadState:{paydayleft:6,morality:50,reputation:0},squad:{smerd:6,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},tohire:0,wa:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},wpc:{smerd:7,dubolom:12,warrior:35,veteran:100,knight:300,hero:1e3},wp:{smerd:10,dubolom:16,warrior:32,veteran:50,knight:100,hero:700},wdc:{smerd:40,dubolom:16,warrior:7,veteran:3,knight:2,hero:.01},warriorsdie:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},exp:{smerd:[60,0],dubolom:[200,0],warrior:[400,0],veteran:[1e3,0],knight:[6e3,0],hero:[1e6,0]},expbaseinc:{smerd:[1,3,4,5],dubolom:[2,3,8,12],warrior:[3,6,12,24],veteran:[4,8,16,36],knight:[5,10,30,90],hero:[0,0,0,0]},expreward:0,squad_imp:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},squadReserved:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},squad_imp_reserv:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},reservCapacity:10,costReservPlace:0,costReservPlacex10:0,radioReservSelect:"all",expReserv:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},Kojania:{demonicPresence:30,demonicPresenceList:[{num:200,className:"white-grade",text:"редкие одиночные цели"},{num:1e3,className:"green-grade",text:"редкие малые стаи"},{num:2500,className:"yellow-grade",text:"возможны крупные стаи"},{num:5e3,className:"red-grade",text:"орды демонов"},{num:9e3,className:"black-grade",text:"чудовищные орды демонов"}],prosperity:250,prosperityList:[{num:50,className:"black-grade",text:"пепелище"},{num:200,className:"red-grade",text:"восстановление"},{num:1e3,className:"yellow-grade",text:"укрепление"},{num:2500,className:"green-grade",text:"стабильность"},{num:5e3,className:"white-grade",text:"экспансия"}],reputation:0,repSumm:0,reputationGain:[],reputationList:[{num:108,className:"yellow-grade",text:"нейтральные"},{num:250,className:"green-grade",text:"открытые"},{num:1e3,className:"white-grade",text:"теплые"},{num:5e3,className:"white-grade",text:"дружеские"},{num:1e4,className:"white-grade",text:"союзные"}],goldBonus:1,enemyBonus:1,availableWarriors:1,targetAvailableWarriors:2,baseHireCost:140,hirecost:14},messageLog1:"",messageLog2:[],battleReport:{result:{key:0,text:[]},gold:0,exp:0},Dict:{},info:["Демоны -- крайне опасные существа. Даже слабейший из них, за счет невероятной грубой силы и живучести, требует слаженной работы десятка людей. У них множество подвидов с различными особенностями. Но, как правило, дальнобойное оружие и добротные копья делают свое дело. По возможности лучше использовать ловушки и не допускать сближения.","Тушки демонов пользуются хорошим спросом. Почти каждую часть их тела можно считать стратегическим ресурсом. Кроме съедобного мяса это отличные доспехи из кожи. Вполне боеспособные луки и арбалеты из прочных связок. Невероятно огромный список амуниции из костей. Каждый участник охоты или сражения получает часть прибыли с этих трофеев."],quests:{active:"hire_10_smerd",hire_10_smerd:{goal:"Нанять 10 рекрутов",finishText:"Рекруты набираются опыта в бою и на тренировке. Когда они будут готовы стоит подумать об их продвижении. При продвижении придется заплатить разовое 2х недельное жалование. Но зато бойцы обязуются улучшить снаряжение, что сделает их сильнее уже в следующем бою и мотивирует на новые подвиги.",niceQuestMsgs:["Можно продвигать рекрутов.","Доступны простые контракты."]},found_contract:{goal:"Выполнить контракт.",finishText:"Время от времени будут появляться различные контракты. Их выполнение важно как для Кожании так и для нас. Хотя мы и не обызаны под этим подписываться, без Кожании у нас мало шансов. Заказчик укажет минимальные требования и предпологаемые проблемы... Однако реальность всегда может оказаться намного хуже самых смелых ожиданий. Если мы не хотим потерять все, нам придется быть к этому, по возможности, готовыми.",niceQuestMsgs:["Можно продвигать дуболомов.","Доступны сложные контракты."]},take_3000_gold:{goal:"3000 золота и 500 мощи",finishText:"Местный староста -- солидный господин. Он весьма снисходителен к гостям и готов бесплатно предоставлять некоторый уровень безопасности. Правда, вне центральной крепости, которая с каждым днем становится все более массивной. Благодаря его политике золото в цене даже в такие времена, а мы без проблем можем купить хорошую экипировку для наших воинов.",niceQuestMsgs:["Отдана 1000 золота, отношения улучшились.","Доступен прогноз рекрутов на следующий день.","Доступно резервирование отрядов."]},take_20_warriors:{goal:"20 воинов и 2000 мощи",finishText:"Нужно полностью захватить и обустроить рудные шахты и помочь с остальными ресурсами, расположенными далеко от поселения. Некоторые контракты -- чистое самоубийство, но вместе с тем их стратегическое значение крайне велико, возможно деже жизненно необходимо.",niceQuestMsgs:["Можно продвигать воинов","Доступны безумные контракты."]},take_10_veterans:{goal:"10 ветеранов и 5000 мощи",finishText:"Наша известность работает в обе стороны. В прославленный отряд присоединяется больше людей и этими людьми проще управлять. Нам доверяют самое лучшие оружие и щедро платят за трофеи. Однако лишь совсем ленивый или в конец тупой не заметил бы наши слабые места. Чем дольше мы сидим на одном месте, тем больше внимания в округе мы привлекаем. За стенами это не так заметно. Но к каждому контракту нужно относиться с осторожностью.",niceQuestMsg1:"Можно продвигать ветеранов",niceQuestMsgs:["Можно продвигать ветеранов."]},take_10_knights:{goal:"10 рыцарей и 9000 мощи",finishText:"Туши убитых демонов полны сюрпризов. Металлурги и алхимики делают исключительные открытия и создают невероятные вещи. Конечно, кто-то должен эти туши добыть, как правило ценой своих жизней, а потом кто-то должен с ними как следует поработать. Но в такие времена сам факт прогресса уже вселяет надежду.",niceQuestMsgs:["Можно продвигать рыцарей."]},take_10_heroes:{goal:"10 героев и 40к мощи",finishText:"Победа (нет)",niceQuestMsgs:[""]}},isAvailableContracts:!1,contracts:{common:{isAvailable:!1,generationChance:[12,12],revard:{first:200,loot:20},prosperityChange:6,reputationCnange:8,chancetoLose:[0,10],basePower:50,scaleRange:6},hard:{isAvailable:!1,generationChance:[5,5],revard:{first:600,loot:35},prosperityChange:10,reputationCnange:16,chancetoLose:[0,4],basePower:300,scaleRange:4},madness:{isAvailable:!1,generationChance:[2,2],revard:{first:1800,loot:50},prosperityChange:20,reputationCnange:32,chancetoLose:[0,2],basePower:1e3,scaleRange:3}},contract_list:[],availableContracts:0,contract_is_taken:[0,0,0,0],rangName:{smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герой"},moralEvents:{Victory:[],Defeat:[],smallVictory:[],humanLost:[],powerLost:[]},moralModifiers:{Victory:0,Defeat:0,smallVictory:0,humanLost:0,powerLost:0},moralBattleCoef:0,isTargetAW:!1,isArmyReserving:!1,modalError:!1,modalMission:!1,modalContracts:!1,modalReservation:!1,modalMoral:!1,modalFinance:!1,modalFinalScore:!1,modalErrorText:"",modalMissionText:"",niceQuestMsgs:[],takenContract:{},isDebug:!1}),mutations:{moralManager(e,a){let t=0;for(let r in e.warriorsdie)t+=e.warriorsdie[r]*e.wp[r];let o=t/(a.power+t);if(o>.15){const a=Math.floor(30*o);e.moralEvents.powerLost.push([a,14])}["Victory","smallVictory","Defeat","humanLost","powerLost"].forEach((a=>{e.moralModifiers[a]=0,e.moralEvents[a].forEach(((t,o,s)=>{e.moralModifiers[a]+=t[0],t[1]--,t[1]<=0&&s.splice(o,1)}))})),a.morality>100&&(e.squadState.morality=100);const s=e.squadState.morality;e.moralBattleCoef=s<25?1-(50-s+(25-s))/100:s<50?1-(50-s)/100:s<75?1+(s-50)/100:1+(s-50+s-75)/100},setDict(e,a){e.Dict=w[a];for(const t in w.en)void 0===e.Dict[t]&&(e.Dict[t]=w.en[t])},toNextDay(e){e.day++,e.squadState.paydayleft--,e.Kojania.demonicPresence+=.01*e.Kojania.demonicPresence+1},time2Pay(e,a){e.squadState.paydayleft+=7,e.gold-=a},hire(e,a){e.squad.smerd+=a,e.gold-=e.Kojania.hirecost*a,e.Kojania.availableWarriors-=a},hire_reset_helper(e,a){e.Kojania.availableWarriors<a&&(e.tohire=e.Kojania.availableWarriors)},buyReservSpace(e,a){e.reservCapacity+=a,e.costReservPlace=50+5*(e.reservCapacity-20),e.costReservPlacex10=275+10*(50+5*(e.reservCapacity-20))},availableWarriors(e){e.Kojania.availableWarriors=Math.floor(e.Kojania.availableWarriors*Math.min(.6*(1+Math.pow(e.Kojania.prosperity,.5)/100),1)+Math.random()*Math.pow(e.Kojania.reputation+10,.7)),e.Kojania.availableWarriors<e.tohire&&(e.tohire=e.Kojania.availableWarriors)},garnisonManager(e,a){e.gold+=a;for(const t in e.squadReserved)if(e.squad_imp_reserv[t]<e.squadReserved[t]&&(e.expReserv[t]+=e.expbaseinc[t][0]*e.squadReserved[t],e.expReserv[t]>e.exp[t][0])){const a=Math.floor(e.expReserv[t]/e.exp[t][0]);e.squad_imp_reserv[t]+=a,e.expReserv[t]-=a*e.exp[t][0]}},rangUp(e,{rang:a,count:t}){switch(e.squad_imp[a]-=t,e.squad[a]-=t,e.gold-=t*e.wpc[a]*2,a){case"smerd":e.squad.dubolom+=t;break;case"dubolom":e.squad.warrior+=t;break;case"warrior":e.squad.veteran+=t;break;case"veteran":e.squad.knight+=t;break;case"knight":e.squad.hero+=t}},reset(e){Object.entries(e.warriorsdie).forEach(((a,t,o)=>{e.warriorsdie[a[0]]=0}))},clearLog(e){e.messageLog1="",e.messageLog2.length=0},openContractList(e){e.modalContracts=!0},openRangInfo(e){e.show.rangInfo=!0},openReservModal(e){e.modalReservation=!0},openMoralModal(e){e.modalMoral=!0},openFinanceModal(e){e.modalFinance=!0},openFinalScore(e){e.modalFinalScore=!0},error(e,a){e.modalErrorText=a,e.modalError=!0},addGold(e){e.gold*=10},addRep(e){e.Kojania.reputation+=50,console.log(e.Kojania.reputation)},addRen(e){e.squadState.reputation+=50,console.log(e.squadState.reputation)},addx2Rep(e){e.Kojania.reputation*=2,console.log(e.Kojania.reputation)},addDaemons(e){e.Kojania.demonicPresence*=2,console.log(e.Kojania.demonicPresence)},addArmy(e){for(let a in e.squad)e.squad[a]+=2,e.squad[a]*=2}},actions:{async toNextDay({commit:e,state:a,getters:t,dispatch:o}){e("clearLog"),e("toNextDay"),0==a.squadState.paydayleft&&e("time2Pay",t.payday),e("availableWarriors"),e("garnisonManager",t.reservTax),o("checkQuest"),o("generateContracts"),await o("battlesimulation"),o("contractManager"),e("moralManager",t),e("reset")},checkQuest({commit:e,state:a,getters:t,dispatch:o},s){let r=a.quests,n=a.squad;switch(r.active){case"hire_10_smerd":n.smerd>=10&&(o("showQuestMsg",r),a.wa.smerd=2,a.wa.dubolom=1,a.isAvailableContracts=!0,a.contracts.common.isAvailable=!0,r.active="found_contract",o("generateContract",{str:"common",minPower:50,recPw:80,rlPw:90,e:0,f:0,g:5,h:5}).then((e=>{a.contract_list.push(e)})));break;case"found_contract":s&&(o("showQuestMsg",r),a.wa.dubolom=2,a.wa.warrior=1,a.contracts.hard.isAvailable=!0,r.active="take_3000_gold");break;case"take_3000_gold":a.gold>3e3&&t.power>500&&(a.gold-=1e3,a.Kojania.reputation+=50,a.isTargetAW=!0,a.reservCapacity=20,a.costReservPlace=50+5*(a.reservCapacity-20),a.costReservPlacex10=275+10*(50+5*(a.reservCapacity-20)),a.isArmyReserving=!0,o("showQuestMsg",r),r.active="take_20_warriors");break;case"take_20_warriors":n.warrior>=20&&t.power>2e3&&(o("showQuestMsg",r),a.wa.warrior=2,a.wa.veteran=1,a.contracts.madness.isAvailable=!0,r.active="take_10_veterans");break;case"take_10_veterans":n.veteran>=10&&t.power>5e3&&(o("showQuestMsg",r),a.wa.veteran=2,a.wa.knight=1,r.active="take_10_knights");break;case"take_10_knights":n.knight>=10&&t.power>9e3&&(o("showQuestMsg",r),a.wa.knight=2,a.wa.hero=1,r.active="take_10_heroes");break;case"take_10_heroes":n.hero>=10&&t.power}},generateContracts({commit:e,state:a,getters:t,dispatch:o}){let s=a.contracts,r=a.contract_list,n=s.common.generationChance,l=s.common.chancetoLose,i=s.hard.generationChance,c=s.hard.chancetoLose,d=s.madness.generationChance,u=s.madness.chancetoLose;const m=a.Kojania.enemyBonus;if(n[1]/100>Math.random()){let e=Math.round((Math.random()*(s.common.scaleRange-1)+1)*s.common.basePower);const t=Math.round(e*(Math.random()/1.5+1));o("generateContract",{str:"common",minPower:e,recPw:t,rlPw:Math.round(.9*t*(1+Math.sqrt(a.Kojania.demonicPresence)/75)*m),e:l[0],f:l[1],g:s.common.prosperityChange,h:s.common.reputationCnange}).then((e=>{r.push(e)})),n[1]-=100}else n[1]=n[1]+n[0];if(i[1]/100>Math.random()){let e=Math.round((Math.random()*(s.hard.scaleRange-1)+1)*s.hard.basePower);const t=Math.round(e*(Math.random()/1.5+1));o("generateContract",{str:"hard",minPower:e,recPw:t,rlPw:Math.round(.9*t*(1+Math.sqrt(a.Kojania.demonicPresence)/50)*m),e:c[0],f:c[1],g:s.hard.prosperityChange,h:s.hard.reputationCnange}).then((e=>{r.push(e)})),i[1]-=100}else i[1]=i[1]+i[0];if(d[1]/100>Math.random()){let e=Math.round((Math.random()*(s.madness.scaleRange-1)+1)*s.madness.basePower);const t=Math.round(e*(Math.random()/1.5+1));o("generateContract",{str:"madness",minPower:e,recPw:t,rlPw:Math.round(.9*t*(1+Math.sqrt(a.Kojania.demonicPresence)/25)*m),e:u[0],f:u[1],g:s.madness.prosperityChange,h:s.madness.reputationCnange}).then((e=>{r.push(e)})),d[1]-=100}else d[1]=d[1]+d[0]},generateContract:(e,{str:a,minPower:t,recPw:o,rlPw:s,e:r,f:n,g:l,h:i})=>({dif:a,minPower:t,recommendedPower:o,realPower:s,chancetoLose:r,changeChance:n,prosperity:l,reputation:i}),contractManager({state:e,dispatch:a}){let t=e.contract_list;e.availableContracts=0;for(const o in t)e.contracts[t[o].dif].isAvailable&&e.availableContracts++,Math.random()<t[o].chancetoLose/100?(e.isDebug&&a("log2","Кожания теряет процветание, "+e.Dict[t[o].dif]+" контракт просрочен."),e.Kojania.prosperity-=t[o].prosperity/2,e.Kojania.prosperity<1&&(e.Kojania.prosperity=1),e.contracts[t[o].dif].isAvailable&&e.availableContracts--,t.splice(o,1)):t[o].chancetoLose+=t[o].changeChance},takeContract({state:e},{contract:a,index:t}){switch(e.takenContract=a,a.dif){case"common":e.contract_is_taken[0]=1,e.contract_is_taken[3]=1;break;case"hard":e.contract_is_taken[1]=1,e.contract_is_taken[3]=1;break;case"madness":e.contract_is_taken[2]=1,e.contract_is_taken[3]=1}e.contract_list.splice(t,1),e.modalContracts--},async battlesimulation({state:e,dispatch:a,getters:t}){if(e.contract_is_taken[3])if(e.takenContract.minPower<t.power){const o=e.takenContract.realPower,s=await a("combatScenario",{enemy:o,ally:t.power});if(e.contract_is_taken[0])if("retreat"==s[0]){a("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:s[1],ep:o,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),a("expGained",3),a("contractIsOver","fail")}else if("very hard"==s[0]){a("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:s[1],ep:o,ep_mlp:1.5,gold:200,goldMlp:.7,reputation:12}),a("expGained",3),a("contractIsOver","win")}else if("hard"==s[0]){a("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт.",dif:s[1],ep:o,ep_mlp:1,gold:200,goldMlp:.7,reputation:5}),a("expGained",2),a("contractIsOver","win")}else a("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:s[1],ep:o,ep_mlp:.4,gold:200,goldMlp:.7,reputation:3}),a("expGained",1),a("contractIsOver","win");else if(e.contract_is_taken[1])if("retreat"==s[0]){a("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:s[1],ep:o,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),a("expGained",3),a("contractIsOver","fail")}else if("very hard"==s[0]){a("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:s[1],ep:o,ep_mlp:1.5,gold:600,goldMlp:.9,reputation:18}),a("expGained",3),a("contractIsOver","win")}else if("hard"==s[0]){a("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт. ",dif:s[1],ep:o,ep_mlp:1,gold:600,goldMlp:.9,reputation:10}),a("expGained",2),a("contractIsOver","win")}else a("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:s[1],ep:o,ep_mlp:.4,gold:600,goldMlp:.9,reputation:8}),a("expGained",1),a("contractIsOver","win");else if("retreat"==s[0]){a("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:s[1],ep:o,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),a("expGained",3),a("contractIsOver","fail")}else if("very hard"==s[0]){a("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:s[1],ep:o,ep_mlp:1.5,gold:1800,goldMlp:1,reputation:30}),a("expGained",3),a("contractIsOver","win")}else if("hard"==s[0]){a("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт. ",dif:s[1],ep:o,ep_mlp:1,gold:1800,goldMlp:1,reputation:20}),a("expGained",2),a("contractIsOver","win")}else a("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:s[1],ep:o,ep_mlp:.4,gold:1800,goldMlp:1,reputation:18}),a("expGained",1),a("contractIsOver","win")}else a("log1","У нас не хватит сил на выполнение контракта."),a("contractIsOver","fail");else{let r=e.Kojania.demonicPresence/e.Kojania.prosperity,n=Math.sqrt(e.Kojania.demonicPresence+100)*r,l=10*n*(1+Math.sqrt(e.squadState.reputation)/10*(1+Math.sqrt(e.Kojania.demonicPresence)/100)),i=(o=n,s=l,Math.random()*(s-o)+o);if(r<1){const e=1-r;if(i<t.power/10){const a=t.power/10;i=Math.min((1+e)*i,a)}}if(t.power>0){let e=await a("combatScenario",{enemy:i,ally:t.power});if("retreat"==e[0]){a("battleResoult",{msg:"Охота обернулась адом для жителей, хотя мы и попытались немного снизить потери.",dif:e[1],ep:i,ep_mlp:2,gold:0,goldMlp:0,reputation:0})}else if("very hard"==e[0]){a("battleResoult",{msg:"Охота превратилась в кровавую битву. Жители благодарны за подаренный им день и готовы щедро заплатить за трофеи.",dif:e[1],ep:i,ep_mlp:1.25,gold:0,goldMlp:1,reputation:8}),a("expGained",3)}else"hard"==e[0]?(a("battleResoult",{msg:"Хоть и было сложно, славная выдалась охота.",dif:e[1],ep:i,ep_mlp:1,gold:0,goldMlp:.7,reputation:3}),a("expGained",2)):"nice battle"==e[0]?(a("battleResoult",{msg:"На патруле возникали небольшие сложности.",dif:e[1],ep:i,ep_mlp:.6,gold:0,goldMlp:.65,reputation:1}),a("expGained",1)):(a("battleResoult",{msg:"Охота и тренировки прошли гладко.",dif:e[1],ep:i,ep_mlp:.5,gold:0,goldMlp:.6,reputation:.25}),a("expGained",0))}}var o,s},battleResoult({state:e,dispatch:a},{msg:t,dif:o,ep:s,ep_mlp:r,gold:n,goldMlp:l,reputation:i}){a("log1",t);const c=Math.round((n+s*l)*e.Kojania.goldBonus);c>0&&(a("log2","Получено золота: "+c),e.gold+=c),e.squadState.reputation+=i,a("squadLoses",{dif:o,ep_mlp:r})},squadLoses({state:e,dispatch:a,getters:t},{dif:o,ep_mlp:s}){const r=Object.entries(e.squad);let n=!1;if(r.forEach(((a,t,r)=>{const l=Math.floor(Math.min(r[t][1]*e.wdc[r[t][0]]/100*o*s,r[t][1]));l>0&&(n=!0,e.warriorsdie[r[t][0]]=l),e.squad[r[t][0]]-=l})),n){let o=0;for(var l in a("log2","-----"),a("log2","Потери"),e.warriorsdie)e.squad[l]>0?e.squad_imp[l]-=Math.floor(e.warriorsdie[l]*(e.squad_imp[l]/e.squad[l])):e.squad_imp[l]=0,e.warriorsdie[l]>0&&a("log2",e.rangName[l]+": "+e.warriorsdie[l]),o+=e.warriorsdie[l];a("log2","-----");let s=o/(t.totalPeople+o);if(s>.1){a("log2","Всего погибло: "+o);const t=Math.floor(20*s);e.moralEvents.humanLost.push([t,14]),a("log2","Человеческие потери снижают мораль: "+t)}}},combatScenario({state:e},{enemy:a,ally:t}){let o=a/t*e.moralBattleCoef,s=["",o];return o>=2?(s[0]="retreat",e.moralEvents.Defeat.push([5,14])):s[0]=o>=1?"very hard":o>=.5?"hard":o>.1?"nice battle":"ez battle",o<=2&&o>.2?e.moralEvents.Victory.push([3,14]):o<=2&&e.moralEvents.smallVictory.push([2,5]),s},expGained({state:e,dispatch:a},t){let o=0,s=0,r=e.exp;for(const n in e.exp)for(o=e.expbaseinc[n][t]*(e.squad[n]-e.squad_imp[n]),s+=o,r[n][1]+=o;r[n][1]>r[n][0];)e.squad_imp[n]++,r[n][1]-=r[n][0];s>0&&a("log2","Общий заработанный опыт: "+s)},rangUp({state:e,commit:a},{rang:t,count:o}){e.gold>o*e.wpc[t]*2?a("rangUp",{rang:t,count:o}):a("error","Нужно больше золота.")},takeReserve({state:e,dispatch:a},{mode:t,name:o}){if("all"==t)e.squad[o]+=e.squadReserved[o],e.squadReserved[o]=0,e.squad_imp[o]+=e.squad_imp_reserv[o],e.squad_imp_reserv[o]=0;else if("rangUp"==t)e.squad[o]+=e.squad_imp_reserv[o],e.squadReserved[o]-=e.squad_imp_reserv[o],e.squad_imp[o]+=e.squad_imp_reserv[o],e.squad_imp_reserv[o]=0;else{let a=e.squadReserved[o]-e.squad_imp_reserv[o];e.squadReserved[o]-=a,e.squad[o]+=a}},takeSquad({state:e,dispatch:a,getters:t},{mode:o,name:s}){if("all"==o){const a=e.reservCapacity-t.totalReserved;let o=Math.max(Math.min(e.squad[s],a),a);o=Math.min(o,e.squad[s]);let r=e.squad_imp[s];o<r&&(r=o),r=Math.min(o,r),e.squad_imp_reserv[s]+=r,e.squad_imp[s]-=r,e.squadReserved[s]+=o,e.squad[s]-=o}else if("rangUp"==o){const a=e.reservCapacity-t.totalReserved;let o=Math.min(e.squad_imp[s],a);e.squad_imp_reserv[s]+=o,e.squad_imp[s]-=o,e.squadReserved[s]+=o,e.squad[s]-=o}else{const a=e.reservCapacity-t.totalReserved;let o=e.squad[s]-e.squad_imp[s],r=Math.min(o,a);e.squadReserved[s]+=r,e.squad[s]-=r}},contractIsOver({state:e,dispatch:a},t){e.contract_is_taken.forEach(((e,a,t)=>{t[a]=0})),"win"==t?(e.Kojania.prosperity*=1+e.takenContract.prosperity/100,e.Kojania.reputation+=e.takenContract.reputation,a("log2","Контракт выполнен."),"common"==e.takenContract.dif&&a("checkQuest","found_contract")):"fail"==t?(e.Kojania.prosperity*=1-1.5*e.takenContract.prosperity/100,e.Kojania.reputation-=2*e.takenContract.reputation,a("log2","Контракт провален.")):e.Kojania.prosperity*=1-e.takenContract.prosperity/2/100},log1({state:e},a){e.messageLog1=a},log2({state:e},a){e.messageLog2.push(a)},showWhatHiden({state:e}){console.log(e.contract_list)},showQuestMsg({dispatch:e},a){e("finishMissionMessage",{text:a[a.active].finishText,msg:a[a.active].niceQuestMsgs})},finishMissionMessage({state:e},{text:a,msg:t}){e.modalMissionText=a,e.modalMission=!0,e.niceQuestMsgs=t},hire({commit:e,state:a},t){e("hire_reset_helper",1),a.gold>=a.Kojania.hirecost*t&&a.Kojania.availableWarriors>0?e("hire",t):a.Kojania.availableWarriors>0?e("error","Нужно больше золота."):e("error","Рекруты закончились. Возможно завтра будут новые."),e("hire_reset_helper",1)},buyReservSpace({commit:e,state:a},t){a.costReservPlace=50+5*(a.reservCapacity-20),a.costReservPlacex10=275+10*(50+5*(a.reservCapacity-20)),1==t&&a.costReservPlace<a.gold?(e("buyReservSpace",t),a.gold-=a.costReservPlace):1==t&&e("error","Нужно больше золота."),10==t&&a.costReservPlacex10<a.gold?(e("buyReservSpace",t),a.gold-=a.costReservPlacex10):10==t&&e("error","Нужно больше золота.")}},getters:{payday:(e,a)=>{let t=0,o=0;for(let s in e.squad)t+=e.squad[s]*e.wpc[s];for(let s in e.squadReserved)o+=e.squadReserved[s]*e.wpc[s];return t+o},power:(e,a)=>{let t=0;for(let o in e.squad)t+=e.squad[o]*e.wp[o];return t},totalPeople:e=>{let a=0;for(let t in e.squad)a+=e.squad[t];return a},demonicPresence:(e,a)=>{for(const t of e.Kojania.demonicPresenceList)if(Math.min(9e3,e.Kojania.demonicPresence)<=t.num)return[t.text,t.className]},kojaniaReputation:(e,a)=>{for(const t of e.Kojania.reputationList)if(Math.min(1e4,e.Kojania.repSumm)<=t.num)return[t.text,t.className]},kojaniaProsperity:(e,a)=>{for(const t of e.Kojania.prosperityList)if(Math.min(5e3,e.Kojania.prosperity)<=t.num)return[t.text,t.className]},targetAvailableWarriors:(e,a)=>Math.floor(e.Kojania.availableWarriors*Math.min(.6*(1+Math.pow(e.Kojania.prosperity,.5)/100),1)+Math.pow(e.Kojania.reputation+10,.7)/2),totalReserved:(e,a)=>{let t=0;for(let o in e.squadReserved)t+=e.squadReserved[o];return t},reservTax:(e,a)=>{let t=0;for(let o in e.squadReserved)t+=e.squadReserved[o]*e.wpc[o]*.1;return Math.round(t)},reservExp:(e,a)=>{let t=0;for(let o in e.squadReserved)t+=e.squadReserved[o]*e.expbaseinc[o][0];return Math.round(t)},moralRenown:e=>Math.floor(Math.pow(e.squadState.reputation,.6)),moralDept:(e,a)=>{let t=0;return e.gold<0&&(t=Math.floor(e.gold/a.payday*20)),Math.max(-100,t)},moralSquadSize:(e,a)=>Math.floor(Math.pow(a.totalPeople,.6)/1.5),moralRich:(e,a)=>{let t;return t=e.gold>0?(e.gold-a.payday)/a.payday:0,t=Math.floor(5*t),Math.min(20,t)},morality:(e,a)=>50+e.moralModifiers.Victory+e.moralModifiers.smallVictory+a.moralRenown+a.moralRich-e.moralModifiers.humanLost-e.moralModifiers.powerLost-e.moralModifiers.Defeat-a.moralSquadSize}}}});f(_t).use(Ct).mount("#app");
