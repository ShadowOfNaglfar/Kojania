import{u as e,c as a,o as t,a as s,b as o,w as r,v as n,d as i,t as l,F as c,e as d,f as u,r as p,g as m,h as g,n as h,i as v,j as b,k}from"./vendor.71af84ca.js";const w={ru:{common:"обычный",hard:"сложный",madness:"безумный",goal:"Текущая цель",Status:"Положение дел",Gold:"Золото",Payday:"Дней до выплаты",Moral:"Мораль",Renown:"Известность",smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герои",smerds:"Рекруты",duboloms:"Дуболомы",warriors:"Воины",veterans:"Ветераны",knights:"Рыцари",heroes:"Герои"},en:{common:"common",hard:"hard",madness:"madness",goal:"Current target",Status:"Status",Gold:"Gold",Payday:"Days to payday",Moral:"Moral",Renown:"Renown",smerd:"smerd",dubolom:"dubolom",warrior:"warrior",veteran:"veteran",knight:"knight",hero:"hero",smerds:"smerds",duboloms:"duboloms",warriors:"warriors",veterans:"veterans",knights:"knights",heroes:"heroes"}};const f=["max"];const _={},y=Object.assign(_,{setup:function(d){const u=e(),p=a((()=>u.state.Entity));return(e,a)=>(t(),s(c,null,[o("div",null,[r(o("input",{type:"range",class:"hire",min:"0",max:i(p).Kojania.availableWarriors,"onUpdate:modelValue":a[0]||(a[0]=e=>i(p).tohire=e)},null,8,f),[[n,i(p).tohire,void 0,{number:!0}]]),o("button",{onClick:a[1]||(a[1]=e=>i(p).tohire=i(p).Kojania.availableWarriors),id:"allBtn"},"max")]),o("p",null,"К найму: "+l(i(p).tohire)+" || На сумму: "+l(i(p).tohire*i(p).Kojania.hirecost),1),o("button",{onClick:a[2]||(a[2]=e=>i(u).dispatch("hire",i(p).tohire)),id:"hireBtn"},"Нанять")],64))}});const C=o("br",null,null,-1),M=d(" | "),q=o("br",null,null,-1),R=o("label",{for:"rangUp"},"готовых к повешению",-1),x=o("br",null,null,-1),j=o("label",{for:"rangDown"},"не готовых к повышению ",-1),P=o("br",null,null,-1),K=o("label",{for:"all"},"всех",-1),S=o("div",null,null,-1),T=o("hr",{id:"niceLine2"},null,-1);const D={data:()=>({dictS:{smerd:"smerds",dubolom:"duboloms",warrior:"warriors",veteran:"veterans",knight:"knights",hero:"heroes"}}),props:["name"],methods:{}},L=Object.assign(D,{setup:function(n){const c=e(),p=a((()=>c.state.Entity));return(e,a)=>(t(),s("div",null,[o("div",null,[o("div",null,[d(l(i(p).Dict[e.dictS[n.name]])+":",1),C,d(" В отряде: "+l(i(p).squad[n.name])+" / "+l(i(p).squad_imp[n.name])+"↑ | В резерве: "+l(i(p).squadReserved[n.name])+" / "+l(i(p).squad_imp_reserv[n.name])+"↑ "+l()+" ",1),o("div",null,[o("button",{class:"closeCartButton min-w40",onClick:a[0]||(a[0]=e=>i(c).dispatch("takeReserve",{mode:i(p).radioReservSelect,name:n.name}))},"Забрать"),M,o("button",{class:"closeCartButton min-w40",onClick:a[1]||(a[1]=e=>i(c).dispatch("takeSquad",{mode:i(p).radioReservSelect,name:n.name}))},"Отослать"),q,r(o("input",{class:"radio",type:"radio","onUpdate:modelValue":a[2]||(a[2]=e=>i(p).radioReservSelect=e),name:"smerd",value:"rangUp",id:"rangUp"},null,512),[[u,i(p).radioReservSelect]]),R,x,r(o("input",{class:"radio",type:"radio","onUpdate:modelValue":a[3]||(a[3]=e=>i(p).radioReservSelect=e),name:"smerd",value:"rangDown",id:"rangDown"},null,512),[[u,i(p).radioReservSelect]]),j,P,r(o("input",{class:"radio",type:"radio","onUpdate:modelValue":a[4]||(a[4]=e=>i(p).radioReservSelect=e),name:"smerd",value:"all",id:"all"},null,512),[[u,i(p).radioReservSelect]]),K])]),S]),T]))}});const N={key:0,class:"modal-mask"},I={class:"modal-wrapper"},W={class:"modal-position"},A={id:"contracts-block"},G={id:"contractTable"},O=o("tr",null,[o("th",null,"Тип"),o("th",null,"Мин. мощь"),o("th",null,"Реком. мощь"),o("th")],-1),Q={key:0},B=["onClick"],E={class:"modal-mask"},U={class:"modal-wrapper"},F={class:"modal-position"},H={id:"mission-block"},V={id:"plus"},z=o("hr",null,null,-1),$={class:"missionText"},J=o("br",null,null,-1),X={class:"modal-mask"},Y={class:"modal-wrapper"},Z={class:"modal-position"},ee={id:"reserv-block"},ae=["onClick","disabled"],te={key:0},se={key:1},oe=o("p",{style:{"margin-top":"8px"}},"Общий резерв:",-1),re=o("hr",null,null,-1),ne=o("p",null,"Расширение гарнизона:",-1),ie=d(" | "),le=o("hr",null,null,-1),ce={class:"modal-mask"},de={class:"modal-wrapper"},ue={class:"modal-position"},pe={id:"moral-block"},me={class:"modal-mask"},ge={class:"modal-wrapper"},he={class:"modal-position"},ve={id:"finance-block"},be={class:"modal-mask"},ke=[o("div",{class:"modal-wrapper"},[o("div",{class:"modal-position"},[o("div",{id:"final-score-block"})])],-1)],we={class:"modal-mask"},fe={class:"modal-wrapper"},_e={class:"modal-position"},ye={id:"error-block"},Ce=o("br",null,null,-1);const Me={data:()=>({currentTab:"smerd",tabs:["smerd","dubolom","warrior","veteran","knight","hero"]})},qe=Object.assign(Me,{setup:function(n){const u=e(),b=a((()=>u.state.Entity));return(e,a)=>(t(),s(c,null,[i(b).modalContracts?(t(),s("div",N,[o("div",I,[o("div",W,[o("div",A,[o("table",G,[O,(t(!0),s(c,null,p(i(b).contract_list,((e,a)=>(t(),s("tbody",null,[i(b).contracts[e.dif].isAvailable?(t(),s("tr",Q,[o("td",null,l(i(b).Dict[e.dif]),1),o("td",null,l(e.minPower),1),o("td",null,l(e.recommendedPower),1),o("td",null,[o("button",{class:"closeCartButton",onClick:t=>i(u).dispatch("takeContract",{contract:e,index:a})},"Принять",8,B)])])):m("",!0)])))),256))]),o("button",{class:"closeCartButton",onClick:a[0]||(a[0]=e=>i(b).modalContracts--)},"Пожалуй не сейчас...")])])])])):m("",!0),r(o("div",E,[o("div",U,[o("div",F,[o("div",H,[(t(!0),s(c,null,p(i(b).niceQuestMsgs,((e,a)=>(t(),s("p",V,l(e),1)))),256)),z,o("p",$,l(i(b).modalMissionText),1),J,o("button",{class:"closeCartButton",onClick:a[1]||(a[1]=e=>i(b).modalMission--)},"Понимаю")])])])],512),[[g,i(b).modalMission]]),r(o("div",X,[o("div",Y,[o("div",Z,[o("div",ee,[(t(!0),s(c,null,p(e.tabs,((a,o)=>(t(),s("button",{key:a,class:h(["tab-button",{active:e.currentTab===a}]),onClick:t=>e.currentTab=a,disabled:!(i(b).wa[a]>0)},[i(b).wa[a]>0?(t(),s("span",te,l(i(b).rangName[a])+l(),1)):(t(),s("span",se,"???"))],10,ae)))),128)),oe,d(" "+l(i(u).getters.totalReserved)+" из "+l(i(b).reservCapacity)+" ",1),o("p",null,"Ежедневный доход от гарнизона: "+l(i(u).getters.reservTax),1),o("p",null,"Ежедневный опыт гарнизона: "+l(i(u).getters.reservExp),1),re,v(L,{name:e.currentTab},null,8,["name"]),ne,o("button",{class:"closeCartButton min-w40",onClick:a[2]||(a[2]=e=>i(u).dispatch("buyReservSpace",1))},"+1 "),ie,o("button",{class:"closeCartButton min-w40",onClick:a[3]||(a[3]=e=>i(u).dispatch("buyReservSpace",10))},"+10"),o("p",null,"Цена 1 места: "+l(i(b).costReservPlace),1),o("p",null,"Цена 10 мест: "+l(i(b).costReservPlacex10),1),le,o("button",{class:"closeCartButton",onClick:a[4]||(a[4]=e=>i(b).modalReservation--)},"Готово")])])])],512),[[g,i(b).modalReservation]]),r(o("div",ce,[o("div",de,[o("div",ue,[o("div",pe,[o("button",{class:"closeCartButton",onClick:a[5]||(a[5]=e=>i(b).modalMoral--)},"Готово")])])])],512),[[g,i(b).modalMoral]]),r(o("div",me,[o("div",ge,[o("div",he,[o("div",ve,[o("button",{class:"closeCartButton",onClick:a[6]||(a[6]=e=>i(b).modalFinance--)},"Готово")])])])],512),[[g,i(b).modalFinance]]),r(o("div",be,ke,512),[[g,i(b).modalFinalScore]]),r(o("div",we,[o("div",fe,[o("div",_e,[o("div",ye,[d(l(i(b).modalErrorText)+" ",1),Ce,o("button",{class:"closeCartButton",onClick:a[7]||(a[7]=e=>i(b).modalError--)},"Понимаю")])])])],512),[[g,i(b).modalError]])],64))}});const Re={class:"tab"},xe={class:"row"},je=o("hr",{id:"niceLine"},null,-1),Pe={class:"rangSpecifics"},Ke={class:"rangText",id:"plus"},Se={class:"rangText",id:"minus"},Te=o("br",null,null,-1),De=["src"],Le=o("hr",{id:"niceLine2"},null,-1),Ne={class:"rangText",id:"rangText"};const Ie={data:()=>({rangInfo:{smerd:{info:"Иногда попадаются толковые ребята. Но в среднем -- пушечное мясо, готовое обмочить штанишки при виде чуть грозного противника.",plus:["Дешевый","Легко обучается"],minus:["Массово гибнет"],url:"1"},dubolom:{info:"Дуболом отличился высоким боевым духом. Мастерство и экипировка все еще могут оставлять желать лучшего, но, по крайней мере, он не подводет в сложный и отвественный момент.",plus:["Неприхотлив","Обучение без рисков"],minus:["Слегка высокая смертность"],url:"2"},warrior:{info:"Воин звучит гордо. Хорошие навыки, разнообразное и качественное снаряжение, а так же непоколебимость -- это звание получают не просто так.",plus:["Сильный боец","Низкая смертность"],minus:["Обучение в бою"],url:"3"},veteran:{info:"Ветераны нашли способ пройти путь воина и сохранить большую из своих частей тела. Приобрели внушительную гибкость в снаряжении и умение выпутываться из сложной ситуации. Великолепные боевые навыки. Готовность успешно выполнить любой, самый безумный приказ. Хотя и это не предел.",plus:["Сильный боец","Очень низкая смертность"],minus:["Высокое содержание","Обучение в бою"],url:"4"},knight:{info:"Человеческая элита, лучшие из лучших. Без отваги на поле боя, граничащей с безумием, до этого ранга не дойти. Самые лучшие трофеи, в первую очередь, попадут в их загребущие до интересностей рученки. Качество их снаряжения, как и расходы в золоте, взлетают до запредельного уровня.",plus:["Очень сильный боец","Крайне живучий гад"],minus:["Очень высокое содержание","Обучается в сложных битвах"],url:"5"},hero:{info:"Специализация героев может быть самой разной. Умения на грани здравого смысла. Сотни и тысячи поверженных врагов на личном счету. Различные могущественные артефакты -- все это обязательные атрибуты Героев.",plus:["Сила не поддается описанию","Условно бессмертен"],minus:["Безумно сложное обучение"],url:"6"}},rangName:{smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герой"}}),props:["name"],methods:{}},We=Object.assign(Ie,{setup:function(r){const n=e(),d=a((()=>n.state.Entity));return(e,a)=>{return t(),s("div",Re,[o("div",xe,[o("div",null,[o("h2",null,l(i(d).rangName[r.name]),1),je,o("div",Pe,[(t(!0),s(c,null,p(e.rangInfo[r.name].plus,(e=>(t(),s("p",Ke,"+ "+l(e),1)))),256)),(t(!0),s(c,null,p(e.rangInfo[r.name].minus,(e=>(t(),s("p",Se,"- "+l(e),1)))),256)),Te,o("p",null,"Cодержание: "+l(i(d).wpc[r.name]),1)])]),o("div",null,[o("div",null,[o("img",{id:"pic",src:(n=e.rangInfo[r.name].url,new URL({"./rang-avarars/1.png":"/Kojania/assets/1.ea454ab5.png","./rang-avarars/2.png":"/Kojania/assets/2.c8991c68.png","./rang-avarars/3.png":"/Kojania/assets/3.72bd031c.png","./rang-avarars/4.png":"/Kojania/assets/4.7cf7f6ff.png","./rang-avarars/5.png":"/Kojania/assets/5.30a644bf.png","./rang-avarars/6.png":"/Kojania/assets/6.bd119c05.png"}[`./rang-avarars/${n}.png`],window.location).href),alt:"",srcset:""},null,8,De)])])]),Le,o("p",Ne,l(e.rangInfo[r.name].info),1),o("button",{class:"closeCartButton",onClick:a[0]||(a[0]=e=>i(d).show.rangInfo=!1)},"Закрыть")]);var n}}});const Ae={class:"modal-position",style:{"margin-left":"-185px"}},Ge={id:"tab-buttons-cont"},Oe=["onClick","disabled"],Qe={key:0},Be={key:1};const Ee={components:{RangCart:We},data:()=>({currentTab:"smerd",tabs:["smerd","dubolom","warrior","veteran","knight","hero"]})},Ue=Object.assign(Ee,{setup:function(r){const n=e(),d=a((()=>n.state.Entity));return(e,a)=>(t(),s("div",Ae,[o("div",Ge,[(t(!0),s(c,null,p(e.tabs,((a,o)=>(t(),s("button",{key:a,class:h(["tab-button",{active:e.currentTab===a}]),onClick:t=>e.currentTab=a,disabled:!(i(d).wa[a]>0)},[i(d).wa[a]>0?(t(),s("span",Qe,l(i(d).rangName[a])+l(),1)):(t(),s("span",Be,"???"))],10,Oe)))),128))]),v(We,{name:e.currentTab},null,8,["name"])]))}});const Fe={id:"content"},He={id:"localContainerPositioner"},Ve={id:"local"},ze={id:"goalContainerPositioner"},$e={id:"goalContainer"},Je={align:"left"},Xe={id:"globalInfoRow"},Ye=o("hr",{class:"svl"},null,-1),Ze=o("hr",{class:"svl"},null,-1),ea=o("hr",null,null,-1),aa={id:"globalInfoRow"},ta=o("hr",{class:"svl"},null,-1),sa=o("hr",{class:"svl"},null,-1),oa={id:"contentPositioner"},ra={class:"kojaniaCont"},na=o("h3",null,"Кожания",-1),ia=d("Отношения: "),la=d("Уровень процветания: "),ca=d(" Демоническая угроза: "),da=d("Цена рекрута: "),ua=o("br",null,null,-1),pa={class:"squadCont"},ma=o("h3",null,"Состав отряда",-1),ga={class:"squadList"},ha={key:0},va=["onClick","toolTip"],ba=["onClick","toolTip"],ka=["onClick","toolTip"],wa=["onClick","toolTip"],fa=o("br",null,null,-1),_a={class:"modal-mask"},ya={class:"modal-wrapper"},Ca={id:"day"},Ma=o("br",null,null,-1),qa={key:0},Ra=o("hr",null,null,-1),xa={id:"eventLogCont"},ja=o("h3",null,"События",-1),Pa={class:"ml"},Ka=d(" ..."),Sa=o("br",null,null,-1),Ta={class:"ml"},Da=o("hr",null,null,-1),La=o("br",null,null,-1);const Na={data:()=>({local:"ru"}),methods:{l10n(e){return"en"==this.local&&void 0===w[this.local][e]?e:w[this.local][e]}}},Ia=Object.assign(Na,{setup:function(n){const u=e(),b=a((()=>u.state.Entity));return u.commit("setDict","ru"),(e,a)=>(t(),s("div",Fe,[o("div",He,[o("div",Ve,[i(b).isDebug?(t(),s("button",{key:0,onClick:a[0]||(a[0]=e=>i(u).commit("setDict","en")),class:"btnex"},"en")):m("",!0),i(b).isDebug?(t(),s("button",{key:1,onClick:a[1]||(a[1]=e=>i(u).commit("setDict","ru")),class:"btnex"},"ru")):m("",!0)])]),o("div",ze,[o("div",$e,[o("h3",null,l(i(b).Dict.goal),1),o("p",null,l(i(b).quests[i(b).quests.active].goal),1)])]),o("div",null,[o("h3",Je,l(i(b).Dict.Status),1)]),o("div",Xe,[o("p",null,l(i(b).Dict.Gold)+": "+l(i(b).gold),1),Ye,o("p",null,l(i(b).Dict.Moral)+": "+l(i(b).squadState.morality),1),o("button",{class:"moralButton",onClick:a[2]||(a[2]=e=>i(u).commit("openMoralModal"))},"▼"),Ze,o("p",null,l(i(b).Dict.Renown)+": "+l(Math.floor(i(b).squadState.reputation)),1)]),ea,o("div",aa,[o("p",null,l(i(b).Dict.Payday)+": "+l(i(b).squadState.paydayleft),1),ta,o("p",null,"Жалование: "+l(i(u).getters.payday),1),sa,o("button",{onClick:a[3]||(a[3]=e=>i(u).commit("openFinanceModal"))},"Финансы")]),o("div",oa,[o("div",ra,[na,o("p",null,[ia,o("span",{class:h(i(u).getters.kojaniaReputation[1])},l(i(u).getters.kojaniaReputation[0]),3)]),o("p",null,[la,o("span",{class:h(i(u).getters.kojaniaProsperity[1])},l(i(u).getters.kojaniaProsperity[0]),3)]),o("p",null,[ca,o("span",{class:h(i(u).getters.demonicPresence[1])},l(i(u).getters.demonicPresence[0]),3)]),o("p",null,[da,o("span",null,l(i(b).Kojania.hirecost),1)]),o("p",null,"Свободные рекруты: "+l(i(b).Kojania.availableWarriors),1),v(y),ua,r(o("div",null,[o("p",null,"Контракты: "+l(i(b).availableContracts),1),r(o("button",{onClick:a[4]||(a[4]=e=>i(u).commit("openContractList"))},"Прием контрактов",512),[[g,i(b).availableContracts>0]])],512),[[g,i(b).isAvailableContracts&&!i(b).contract_is_taken[3]]]),r(o("p",null,"Принят контракт",512),[[g,i(b).contract_is_taken[0]]]),r(o("p",null,"Принят сложный контракт",512),[[g,i(b).contract_is_taken[1]]]),r(o("p",null,"Принят безумный контракт",512),[[g,i(b).contract_is_taken[2]]])]),o("div",pa,[ma,(t(!0),s(c,null,p(i(b).squad,((e,a)=>(t(),s("p",ga,[e>0?(t(),s("div",ha,[d(l(i(b).rangName[a])+": "+l(e)+" ",1),i(b).squad_imp[a]>0&&i(b).wa[a]>1?(t(),s("button",{key:0,onClick:e=>i(u).dispatch("rangUp",{rang:a,count:1}),toolTip:"Стоимость: "+2*i(b).wpc[a],class:"tooltip"}," 1+ ",8,va)):m("",!0),i(b).squad_imp[a]>=10&&i(b).wa[a]>1?(t(),s("button",{key:1,onClick:e=>i(u).dispatch("rangUp",{rang:a,count:10}),toolTip:"Стоимость: "+2*i(b).wpc[a]*10,class:"tooltip"}," 10+ ",8,ba)):m("",!0),i(b).squad_imp[a]>=100&&i(b).wa[a]>1?(t(),s("button",{key:2,onClick:e=>i(u).dispatch("rangUp",{rang:a,count:100}),toolTip:"Стоимость: "+2*i(b).wpc[a]*100,class:"tooltip"}," 100+ ",8,ka)):m("",!0),i(b).squad_imp[a]>1&&i(b).wa[a]>1?(t(),s("button",{key:3,onClick:e=>i(u).dispatch("rangUp",{rang:a,count:i(b).squad_imp[a]}),toolTip:"Стоимость: "+i(b).squad_imp[a]*i(b).wpc[a]*2,class:"tooltip"},l(i(b).squad_imp[a])+"+ ",9,wa)):m("",!0)])):m("",!0)])))),256)),fa,o("p",null,"Всего людей: "+l(i(u).getters.totalPeople),1),o("p",null,"Боевая мощь: "+l(i(u).getters.power),1),i(b).wa.smerd>0?(t(),s("button",{key:0,onClick:a[5]||(a[5]=e=>i(u).commit("openRangInfo"))},"? о рангах")):m("",!0),i(b).isArmyReserving?(t(),s("button",{key:1,onClick:a[6]||(a[6]=e=>i(u).commit("openReservModal")),class:"btnex"},"Резерв")):m("",!0)])]),r(o("div",_a,[o("div",ya,[v(Ue)])],512),[[g,i(b).show.rangInfo]]),o("div",null,[o("span",Ca,"День: "+l(i(b).day),1),Ma,o("button",{onClick:a[7]||(a[7]=e=>i(u).dispatch("toNextDay")),class:"btnex"},"Завершение дня.")]),i(b).isTargetAW?(t(),s("p",qa,"Прогноз рекрутов на завтра: "+l(i(u).getters.targetAvailableWarriors),1)):m("",!0),Ra,o("div",xa,[ja,o("p",Pa,l(i(b).messageLog1),1),Ka,Sa,(t(!0),s(c,null,p(i(b).messageLog2,((e,a)=>(t(),s("p",Ta,l(i(b).messageLog2[a]),1)))),256))]),Da,i(b).isDebug?(t(),s("button",{key:1,onClick:a[8]||(a[8]=e=>i(u).commit("addRep")),class:"btnex"},"+50 rep")):m("",!0),i(b).isDebug?(t(),s("button",{key:2,onClick:a[9]||(a[9]=e=>i(u).commit("addx2Rep")),class:"btnex"},"x2 rep")):m("",!0),i(b).isDebug?(t(),s("button",{key:3,onClick:a[10]||(a[10]=e=>i(u).commit("addRen")),class:"btnex"},"+50 ren")):m("",!0),i(b).isDebug?(t(),s("button",{key:4,onClick:a[11]||(a[11]=e=>i(u).commit("addGold")),class:"btnex"},"x10 gold")):m("",!0),i(b).isDebug?(t(),s("button",{key:5,onClick:a[12]||(a[12]=e=>i(u).commit("addDaemons")),class:"btnex"},"x2 daemons")):m("",!0),i(b).isDebug?(t(),s("button",{key:6,onClick:a[13]||(a[13]=e=>i(u).commit("addArmy")),class:"btnex"},"addArmy")):m("",!0),La,i(b).isDebug?(t(),s("button",{key:7,onClick:a[14]||(a[14]=e=>i(u).dispatch("showWhatHiden")),class:"btnex"},"showWhatHiden()")):m("",!0),v(qe)]))}});const Wa=b({modules:{Entity:{state:()=>({local:"ru",day:1,gold:1120,show:{rangInfo:!1},squadState:{paydayleft:6,morality:50,reputation:0},squad:{smerd:6,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},tohire:0,wa:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},wpc:{smerd:7,dubolom:12,warrior:35,veteran:100,knight:300,hero:1e3},wp:{smerd:10,dubolom:16,warrior:32,veteran:50,knight:100,hero:700},wdc:{smerd:40,dubolom:16,warrior:7,veteran:3,knight:2,hero:.01},warriorsdie:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},exp:{smerd:[60,0],dubolom:[200,0],warrior:[400,0],veteran:[1e3,0],knight:[6e3,0],hero:[1e6,0]},expbaseinc:{smerd:[1,3,4,5],dubolom:[2,3,8,12],warrior:[3,6,12,24],veteran:[4,8,16,36],knight:[5,10,30,90],hero:[0,0,0,0]},expreward:0,squad_imp:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},squadReserved:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},squad_imp_reserv:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},reservCapacity:10,costReservPlace:0,costReservPlacex10:0,radioReservSelect:"all",expReserv:{smerd:0,dubolom:0,warrior:0,veteran:0,knight:0,hero:0},Kojania:{demonicPresence:30,demonicPresenceList:[{num:200,className:"white-grade",text:"редкие одиночные цели"},{num:1e3,className:"green-grade",text:"редкие малые стаи"},{num:2500,className:"yellow-grade",text:"возможны крупные стаи"},{num:5e3,className:"red-grade",text:"орды демонов"},{num:9e3,className:"black-grade",text:"чудовищные орды демонов"}],prosperity:250,prosperityList:[{num:50,className:"black-grade",text:"пепелище"},{num:200,className:"red-grade",text:"восстановление"},{num:1e3,className:"yellow-grade",text:"укрепление"},{num:2500,className:"green-grade",text:"стабильность"},{num:5e3,className:"white-grade",text:"экспансия"}],reputation:0,repSumm:0,reputationGain:[],reputationList:[{num:108,className:"yellow-grade",text:"нейтральные"},{num:250,className:"green-grade",text:"открытые"},{num:1e3,className:"white-grade",text:"теплые"},{num:5e3,className:"white-grade",text:"дружеские"},{num:1e4,className:"white-grade",text:"союзные"}],goldBonus:1,enemyBonus:1,availableWarriors:1,targetAvailableWarriors:2,baseHireCost:140,hirecost:14},messageLog1:"",messageLog2:[],battleReport:{result:{key:0,text:[]},gold:0,exp:0},Dict:{},info:["Демоны -- крайне опасные существа. Даже слабейший из них, за счет невероятной грубой силы и живучести, требует слаженной работы десятка людей. У них множество подвидов с различными особенностями. Но, как правило, дальнобойное оружие и добротные копья делают свое дело. По возможности лучше использовать ловушки и не допускать сближения.","Тушки демонов пользуются хорошим спросом. Почти каждую часть их тела можно считать стратегическим ресурсом. Кроме съедобного мяса это отличные доспехи из кожи. Вполне боеспособные луки и арбалеты из прочных связок. Невероятно огромный список амуниции из костей. Каждый участник охоты или сражения получает часть прибыли с этих трофеев."],quests:{active:"hire_10_smerd",hire_10_smerd:{goal:"Нанять 10 рекрутов",finishText:"Рекруты набираются опыта в бою и на тренировке. Когда они будут готовы стоит подумать об их продвижении. При продвижении придется заплатить разовое 2х недельное жалование. Но зато бойцы обязуются улучшить снаряжение, что сделает их сильнее уже в следующем бою и мотивирует на новые подвиги.",niceQuestMsgs:["Можно продвигать рекрутов.","Доступны простые контракты."]},found_contract:{goal:"Выполнить контракт.",finishText:"Время от времени будут появляться различные контракты. Их выполнение важно как для Кожании так и для нас. Хотя мы и не обызаны под этим подписываться, без Кожании у нас мало шансов. Заказчик укажет минимальные требования и предпологаемые проблемы... Однако реальность всегда может оказаться намного хуже самых смелых ожиданий. Если мы не хотим потерять все, нам придется быть к этому, по возможности, готовыми.",niceQuestMsgs:["Можно продвигать дуболомов.","Доступны сложные контракты."]},take_3000_gold:{goal:"3000 золота и 500 мощи",finishText:"Местный староста -- солидный господин. Он весьма снисходителен к гостям и готов бесплатно предоставлять некоторый уровень безопасности. Правда, вне центральной крепости, которая с каждым днем становится все более массивной. Благодаря его политике золото в цене даже в такие времена, а мы без проблем можем купить хорошую экипировку для наших воинов.",niceQuestMsgs:["Отдана 1000 золота, отношения улучшились.","Доступен прогноз рекрутов на следующий день.","Доступно резервирование отрядов."]},take_20_warriors:{goal:"20 воинов и 2000 мощи",finishText:"Нужно полностью захватить и обустроить рудные шахты и помочь с остальными ресурсами, расположенными далеко от поселения. Некоторые контракты -- чистое самоубийство, но вместе с тем их стратегическое значение крайне велико, возможно деже жизненно необходимо.",niceQuestMsgs:["Можно продвигать воинов","Доступны безумные контракты."]},take_10_veterans:{goal:"10 ветеранов и 5000 мощи",finishText:"Наша известность работает в обе стороны. В прославленный отряд присоединяется больше людей и этими людьми проще управлять. Нам доверяют самое лучшие оружие и щедро платят за трофеи. Однако лишь совсем ленивый или в конец тупой не заметил бы наши слабые места. Чем дольше мы сидим на одном месте, тем больше внимания в округе мы привлекаем. За стенами это не так заметно. Но к каждому контракту нужно относиться с осторожностью.",niceQuestMsg1:"Можно продвигать ветеранов",niceQuestMsgs:["Можно продвигать ветеранов."]},take_10_knights:{goal:"10 рыцарей и 9000 мощи",finishText:"Туши убитых демонов полны сюрпризов. Металлурги и алхимики делают исключительные открытия и создают невероятные вещи. Конечно, кто-то должен эти туши добыть, как правило ценой своих жизней, а потом кто-то должен с ними как следует поработать. Но в такие времена сам факт прогресса уже вселяет надежду.",niceQuestMsgs:["Можно продвигать рыцарей."]},take_10_heroes:{goal:"10 героев и 40к мощи",finishText:"Победа (нет)",niceQuestMsgs:[""]}},isAvailableContracts:!1,contracts:{common:{isAvailable:!1,generationChance:[12,12],revard:{first:200,loot:20},prosperityChange:6,reputationCnange:8,chancetoLose:[0,10],basePower:50,scaleRange:6},hard:{isAvailable:!1,generationChance:[5,5],revard:{first:600,loot:35},prosperityChange:10,reputationCnange:16,chancetoLose:[0,4],basePower:300,scaleRange:4},madness:{isAvailable:!1,generationChance:[2,2],revard:{first:1800,loot:50},prosperityChange:20,reputationCnange:32,chancetoLose:[0,2],basePower:1e3,scaleRange:3}},contract_list:[],availableContracts:0,contract_is_taken:[0,0,0,0],rangName:{smerd:"Рекрут",dubolom:"Дуболом",warrior:"Воин",veteran:"Ветеран",knight:"Рыцарь",hero:"Герой"},isTargetAW:!1,isArmyReserving:!1,modalError:!1,modalMission:!1,modalContracts:!1,modalReservation:!1,modalMoral:!1,modalFinance:!1,modalFinalScore:!1,modalErrorText:"",modalMissionText:"",niceQuestMsgs:[],takenContract:{},isDebug:!0}),mutations:{setDict(e,a){e.Dict=w[a];for(const t in w.en)void 0===e.Dict[t]&&(e.Dict[t]=w.en[t])},toNextDay(e){e.day++,e.squadState.paydayleft--,e.Kojania.demonicPresence+=.01*e.Kojania.demonicPresence+1},time2Pay(e,a){e.squadState.paydayleft+=7,e.gold-=a},hire(e,a){e.squad.smerd+=a,e.gold-=e.Kojania.hirecost*a,e.Kojania.availableWarriors-=a},hire_reset_helper(e,a){e.Kojania.availableWarriors<a&&(e.tohire=e.Kojania.availableWarriors)},buyReservSpace(e,a){e.reservCapacity+=a,e.costReservPlace=50+5*(e.reservCapacity-20),e.costReservPlacex10=275+10*(50+5*(e.reservCapacity-20))},availableWarriors(e){e.Kojania.availableWarriors=Math.floor(e.Kojania.availableWarriors*Math.min(.6*(1+Math.pow(e.Kojania.prosperity,.5)/100),1)+Math.random()*Math.pow(e.Kojania.reputation+10,.7)),e.Kojania.availableWarriors<e.tohire&&(e.tohire=e.Kojania.availableWarriors)},garnisonManager(e,a){e.gold+=a;for(const t in e.squadReserved)if(e.squad_imp_reserv[t]<e.squadReserved[t]&&(e.expReserv[t]+=e.expbaseinc[t][0]*e.squadReserved[t],e.expReserv[t]>e.exp[t][0])){const a=Math.floor(e.expReserv[t]/e.exp[t][0]);e.squad_imp_reserv[t]+=a,e.expReserv[t]-=a*e.exp[t][0]}},rangUp(e,{rang:a,count:t}){switch(e.squad_imp[a]-=t,e.squad[a]-=t,e.gold-=t*e.wpc[a]*2,a){case"smerd":e.squad.dubolom+=t;break;case"dubolom":e.squad.warrior+=t;break;case"warrior":e.squad.veteran+=t;break;case"veteran":e.squad.knight+=t;break;case"knight":e.squad.hero+=t}},reset(e){Object.entries(e.warriorsdie).forEach(((a,t,s)=>{e.warriorsdie[a[0]]=0}))},clearLog(e){e.messageLog1="",e.messageLog2.length=0},openContractList(e){e.modalContracts=!0},openRangInfo(e){e.show.rangInfo=!0},openReservModal(e){e.modalReservation=!0},openMoralModal(e){e.modalMoral=!0},openFinanceModal(e){e.modalFinance=!0},openFinalScore(e){e.modalFinalScore=!0},error(e,a){e.modalErrorText=a,e.modalError=!0},addGold(e){e.gold*=10},addRep(e){e.Kojania.reputation+=50,console.log(e.Kojania.reputation)},addRen(e){e.squadState.reputation+=50,console.log(e.squadState.reputation)},addx2Rep(e){e.Kojania.reputation*=2,console.log(e.Kojania.reputation)},addDaemons(e){e.Kojania.demonicPresence*=2,console.log(e.Kojania.demonicPresence)},addArmy(e){for(let a in e.squad)e.squad[a]+=2,e.squad[a]*=2}},actions:{toNextDay({commit:e,state:a,getters:t,dispatch:s}){e("clearLog"),e("toNextDay"),0==a.squadState.paydayleft&&e("time2Pay",t.payday),e("availableWarriors"),e("garnisonManager",t.reservTax),s("checkQuest"),s("generateContracts"),s("battlesimulation"),s("contractManager"),e("reset")},checkQuest({commit:e,state:a,getters:t,dispatch:s},o){let r=a.quests,n=a.squad;switch(r.active){case"hire_10_smerd":n.smerd>=10&&(s("showQuestMsg",r),a.wa.smerd=2,a.wa.dubolom=1,a.isAvailableContracts=!0,a.contracts.common.isAvailable=!0,r.active="found_contract",s("generateContract",{str:"common",minPower:50,recPw:80,rlPw:90,e:0,f:0,g:5,h:5}).then((e=>{a.contract_list.push(e)})));break;case"found_contract":o&&(s("showQuestMsg",r),a.wa.dubolom=2,a.wa.warrior=1,a.contracts.hard.isAvailable=!0,r.active="take_3000_gold");break;case"take_3000_gold":a.gold>3e3&&t.power>500&&(a.gold-=1e3,a.Kojania.reputation+=50,a.isTargetAW=!0,a.reservCapacity=20,a.costReservPlace=50+5*(a.reservCapacity-20),a.costReservPlacex10=275+10*(50+5*(a.reservCapacity-20)),a.isArmyReserving=!0,s("showQuestMsg",r),r.active="take_20_warriors");break;case"take_20_warriors":n.warrior>=20&&t.power>2e3&&(s("showQuestMsg",r),a.wa.warrior=2,a.wa.veteran=1,a.contracts.madness.isAvailable=!0,r.active="take_10_veterans");break;case"take_10_veterans":n.veteran>=10&&t.power>5e3&&(s("showQuestMsg",r),a.wa.veteran=2,a.wa.knight=1,r.active="take_10_knights");break;case"take_10_knights":n.knight>=10&&t.power>9e3&&(s("showQuestMsg",r),a.wa.knight=2,a.wa.hero=1,r.active="take_10_heroes");break;case"take_10_heroes":n.hero>=10&&t.power}},generateContracts({commit:e,state:a,getters:t,dispatch:s}){let o=a.contracts,r=a.contract_list,n=o.common.generationChance,i=o.common.chancetoLose,l=o.hard.generationChance,c=o.hard.chancetoLose,d=o.madness.generationChance,u=o.madness.chancetoLose;const p=a.Kojania.enemyBonus;if(n[1]/100>Math.random()){let e=Math.round((Math.random()*(o.common.scaleRange-1)+1)*o.common.basePower);const t=Math.round(e*(Math.random()/1.5+1));s("generateContract",{str:"common",minPower:e,recPw:t,rlPw:Math.round(.9*t*(1+Math.sqrt(a.Kojania.demonicPresence)/75)*p),e:i[0],f:i[1],g:o.common.prosperityChange,h:o.common.reputationCnange}).then((e=>{r.push(e)})),n[1]-=100}else n[1]=n[1]+n[0];if(l[1]/100>Math.random()){let e=Math.round((Math.random()*(o.hard.scaleRange-1)+1)*o.hard.basePower);const t=Math.round(e*(Math.random()/1.5+1));s("generateContract",{str:"hard",minPower:e,recPw:t,rlPw:Math.round(.9*t*(1+Math.sqrt(a.Kojania.demonicPresence)/50)*p),e:c[0],f:c[1],g:o.hard.prosperityChange,h:o.hard.reputationCnange}).then((e=>{r.push(e)})),l[1]-=100}else l[1]=l[1]+l[0];if(d[1]/100>Math.random()){let e=Math.round((Math.random()*(o.madness.scaleRange-1)+1)*o.madness.basePower);const t=Math.round(e*(Math.random()/1.5+1));s("generateContract",{str:"madness",minPower:e,recPw:t,rlPw:Math.round(.9*t*(1+Math.sqrt(a.Kojania.demonicPresence)/25)*p),e:u[0],f:u[1],g:o.madness.prosperityChange,h:o.madness.reputationCnange}).then((e=>{r.push(e)})),d[1]-=100}else d[1]=d[1]+d[0]},generateContract:(e,{str:a,minPower:t,recPw:s,rlPw:o,e:r,f:n,g:i,h:l})=>({dif:a,minPower:t,recommendedPower:s,realPower:o,chancetoLose:r,changeChance:n,prosperity:i,reputation:l}),contractManager({state:e,dispatch:a}){let t=e.contract_list;e.availableContracts=0;for(const s in t)e.contracts[t[s].dif].isAvailable&&e.availableContracts++,Math.random()<t[s].chancetoLose/100?(e.isDebug&&a("log2","Кожания теряет процветание, "+e.Dict[t[s].dif]+" контракт просрочен."),e.Kojania.prosperity-=t[s].prosperity/2,e.Kojania.prosperity<1&&(e.Kojania.prosperity=1),e.contracts[t[s].dif].isAvailable&&e.availableContracts--,t.splice(s,1)):t[s].chancetoLose+=t[s].changeChance},takeContract({state:e},{contract:a,index:t}){switch(e.takenContract=a,a.dif){case"common":e.contract_is_taken[0]=1,e.contract_is_taken[3]=1;break;case"hard":e.contract_is_taken[1]=1,e.contract_is_taken[3]=1;break;case"madness":e.contract_is_taken[2]=1,e.contract_is_taken[3]=1}e.contract_list.splice(t,1),e.modalContracts--},async battlesimulation({state:e,dispatch:a,getters:t}){if(e.contract_is_taken[3])if(e.takenContract.minPower<t.power){const s=e.takenContract.realPower,o=await a("combatScenario",{enemy:s,ally:t.power});if(e.contract_is_taken[0])if("retreat"==o[0]){a("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:o[1],ep:s,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),a("expGained",3),a("contractIsOver","fail")}else if("very hard"==o[0]){a("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:o[1],ep:s,ep_mlp:1.5,gold:200,goldMlp:.7,reputation:12}),a("expGained",3),a("contractIsOver","win")}else if("hard"==o[0]){a("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт.",dif:o[1],ep:s,ep_mlp:1,gold:200,goldMlp:.7,reputation:5}),a("expGained",2),a("contractIsOver","win")}else a("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:o[1],ep:s,ep_mlp:.4,gold:200,goldMlp:.7,reputation:3}),a("expGained",1),a("contractIsOver","win");else if(e.contract_is_taken[1])if("retreat"==o[0]){a("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:o[1],ep:s,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),a("expGained",3),a("contractIsOver","fail")}else if("very hard"==o[0]){a("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:o[1],ep:s,ep_mlp:1.5,gold:600,goldMlp:.9,reputation:18}),a("expGained",3),a("contractIsOver","win")}else if("hard"==o[0]){a("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт. ",dif:o[1],ep:s,ep_mlp:1,gold:600,goldMlp:.9,reputation:10}),a("expGained",2),a("contractIsOver","win")}else a("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:o[1],ep:s,ep_mlp:.4,gold:600,goldMlp:.9,reputation:8}),a("expGained",1),a("contractIsOver","win");else if("retreat"==o[0]){a("battleResoult",{msg:"Пришлось отступать. Многие бойцы отдали жизни ради сохранения отряда. Это тяжелый удар.",dif:o[1],ep:s,ep_mlp:3,gold:0,goldMlp:0,reputation:0}),a("expGained",3),a("contractIsOver","fail")}else if("very hard"==o[0]){a("battleResoult",{msg:"Враг был намного сильнее. Но именно в таких битвах куется слава и репутация.",dif:o[1],ep:s,ep_mlp:1.5,gold:1800,goldMlp:1,reputation:30}),a("expGained",3),a("contractIsOver","win")}else if("hard"==o[0]){a("battleResoult",{msg:"Почти равный бой. Приобретен ценный опыт. ",dif:o[1],ep:s,ep_mlp:1,gold:1800,goldMlp:1,reputation:20}),a("expGained",2),a("contractIsOver","win")}else a("battleResoult",{msg:"Враг оказался намного слабее нас.",dif:o[1],ep:s,ep_mlp:.4,gold:1800,goldMlp:1,reputation:18}),a("expGained",1),a("contractIsOver","win")}else a("log1","У нас не хватит сил на выполнение контракта."),a("contractIsOver","fail");else{let r=e.Kojania.demonicPresence/e.Kojania.prosperity,n=Math.sqrt(e.Kojania.demonicPresence+100)*r,i=10*n*(1+Math.sqrt(e.squadState.reputation)/10*(1+Math.sqrt(e.Kojania.demonicPresence)/100)),l=(s=n,o=i,Math.random()*(o-s)+s);if(r<1){const e=1-r;if(l<t.power/10){const a=t.power/10;l=Math.min((1+e)*l,a)}}if(t.power>0){let e=await a("combatScenario",{enemy:l,ally:t.power});if("retreat"==e[0]){a("battleResoult",{msg:"Охота обернулась адом для жителей, хотя мы и попытались немного снизить потери.",dif:e[1],ep:l,ep_mlp:2,gold:0,goldMlp:0,reputation:0})}else if("very hard"==e[0]){a("battleResoult",{msg:"Охота превратилась в кровавую битву. Жители благодарны за подаренный им день и готовы щедро заплатить за трофеи.",dif:e[1],ep:l,ep_mlp:1.25,gold:0,goldMlp:1,reputation:8}),a("expGained",3)}else"hard"==e[0]?(a("battleResoult",{msg:"Хоть и было сложно, славная выдалась охота.",dif:e[1],ep:l,ep_mlp:1,gold:0,goldMlp:.7,reputation:3}),a("expGained",2)):"nice battle"==e[0]?(a("battleResoult",{msg:"На патруле возникли сложности.",dif:e[1],ep:l,ep_mlp:.6,gold:0,goldMlp:.65,reputation:1}),a("expGained",1)):(a("battleResoult",{msg:"Охота и тренировки прошли гладко.",dif:e[1],ep:l,ep_mlp:.5,gold:0,goldMlp:.6,reputation:.25}),a("expGained",0))}}var s,o},battleResoult({state:e,dispatch:a},{msg:t,dif:s,ep:o,ep_mlp:r,gold:n,goldMlp:i,reputation:l}){a("log1",t);const c=Math.round((n+o*i)*e.Kojania.goldBonus);c>0&&(a("log2","Получено золота: "+c),e.gold+=c),e.squadState.reputation+=l,a("squadLoses",{dif:s,ep_mlp:r})},squadLoses({state:e,dispatch:a},{dif:t,ep_mlp:s}){const o=Object.entries(e.squad);let r=!1;if(o.forEach(((a,o,n)=>{const i=Math.floor(Math.min(n[o][1]*e.wdc[n[o][0]]/100*t*s,n[o][1]));i>0&&(r=!0,e.warriorsdie[n[o][0]]=i),e.squad[n[o][0]]-=i})),r){for(var n in a("log2","-----"),a("log2","Потери"),e.warriorsdie)e.squad[n]>0?e.squad_imp[n]-=Math.floor(e.warriorsdie[n]*(e.squad_imp[n]/e.squad[n])):e.squad_imp[n]=0,e.warriorsdie[n]>0&&a("log2",e.rangName[n]+": "+e.warriorsdie[n]);a("log2","-----")}},combatScenario({},{enemy:e,ally:a}){let t=e/a,s=["",t];return s[0]=t>=2?"retreat":t>=1?"very hard":t>=.5?"hard":t>.1?"nice battle":"ez battle",s},expGained({state:e,dispatch:a},t){let s=0,o=0,r=e.exp;for(const n in e.exp)for(s=e.expbaseinc[n][t]*(e.squad[n]-e.squad_imp[n]),o+=s,r[n][1]+=s;r[n][1]>r[n][0];)e.squad_imp[n]++,r[n][1]-=r[n][0];o>0&&a("log2","Общий заработанный опыт: "+o)},rangUp({state:e,commit:a},{rang:t,count:s}){e.gold>s*e.wpc[t]*2?a("rangUp",{rang:t,count:s}):a("error","Нужно больше золота.")},takeReserve({state:e,dispatch:a},{mode:t,name:s}){if("all"==t)e.squad[s]+=e.squadReserved[s],e.squadReserved[s]=0,e.squad_imp[s]+=e.squad_imp_reserv[s],e.squad_imp_reserv[s]=0;else if("rangUp"==t)e.squad[s]+=e.squad_imp_reserv[s],e.squadReserved[s]-=e.squad_imp_reserv[s],e.squad_imp[s]+=e.squad_imp_reserv[s],e.squad_imp_reserv[s]=0;else{let a=e.squadReserved[s]-e.squad_imp_reserv[s];e.squadReserved[s]-=a,e.squad[s]+=a}},takeSquad({state:e,dispatch:a,getters:t},{mode:s,name:o}){if("all"==s){const a=e.reservCapacity-t.totalReserved;let s=Math.max(Math.min(e.squad[o],a),a);s=Math.min(s,e.squad[o]);let r=e.squad_imp[o];s<r&&(r=s),r=Math.min(s,r),e.squad_imp_reserv[o]+=r,e.squad_imp[o]-=r,e.squadReserved[o]+=s,e.squad[o]-=s}else if("rangUp"==s){const a=e.reservCapacity-t.totalReserved;let s=Math.min(e.squad_imp[o],a);e.squad_imp_reserv[o]+=s,e.squad_imp[o]-=s,e.squadReserved[o]+=s,e.squad[o]-=s}else{const a=e.reservCapacity-t.totalReserved;let s=e.squad[o]-e.squad_imp[o],r=Math.min(s,a);e.squadReserved[o]+=r,e.squad[o]-=r}},contractIsOver({state:e,dispatch:a},t){e.contract_is_taken.forEach(((e,a,t)=>{t[a]=0})),"win"==t?(e.Kojania.prosperity*=1+e.takenContract.prosperity/100,e.Kojania.reputation+=e.takenContract.reputation,a("log2","Контракт выполнен."),"common"==e.takenContract.dif&&a("checkQuest","found_contract")):"fail"==t?(e.Kojania.prosperity*=1-1.5*e.takenContract.prosperity/100,e.Kojania.reputation-=2*e.takenContract.reputation,a("log2","Контракт провален.")):e.Kojania.prosperity*=1-e.takenContract.prosperity/2/100},log1({state:e},a){e.messageLog1=a},log2({state:e},a){e.messageLog2.push(a)},showWhatHiden({state:e}){console.log(e.contract_list)},showQuestMsg({dispatch:e},a){e("finishMissionMessage",{text:a[a.active].finishText,msg:a[a.active].niceQuestMsgs})},finishMissionMessage({state:e},{text:a,msg:t}){e.modalMissionText=a,e.modalMission=!0,e.niceQuestMsgs=t},hire({commit:e,state:a},t){e("hire_reset_helper",1),a.gold>=a.Kojania.hirecost*t&&a.Kojania.availableWarriors>0?e("hire",t):a.Kojania.availableWarriors>0?e("error","Нужно больше золота."):e("error","Рекруты закончились. Возможно завтра будут новые."),e("hire_reset_helper",1)},buyReservSpace({commit:e,state:a},t){a.costReservPlace=50+5*(a.reservCapacity-20),a.costReservPlacex10=275+10*(50+5*(a.reservCapacity-20)),1==t&&a.costReservPlace<a.gold?(e("buyReservSpace",t),a.gold-=a.costReservPlace):1==t&&e("error","Нужно больше золота."),10==t&&a.costReservPlacex10<a.gold?(e("buyReservSpace",t),a.gold-=a.costReservPlacex10):10==t&&e("error","Нужно больше золота.")}},getters:{payday:(e,a)=>{let t=0,s=0;for(let o in e.squad)t+=e.squad[o]*e.wpc[o];for(let o in e.squadReserved)s+=e.squadReserved[o]*e.wpc[o];return t+s},power:(e,a)=>{let t=0;for(let s in e.squad)t+=e.squad[s]*e.wp[s];return t},totalPeople:(e,a)=>{let t=0;for(let s in e.squad)t+=e.squad[s];return t},demonicPresence:(e,a)=>{for(const t of e.Kojania.demonicPresenceList)if(Math.min(9e3,e.Kojania.demonicPresence)<=t.num)return[t.text,t.className]},kojaniaReputation:(e,a)=>{for(const t of e.Kojania.reputationList)if(Math.min(1e4,e.Kojania.repSumm)<=t.num)return[t.text,t.className]},kojaniaProsperity:(e,a)=>{for(const t of e.Kojania.prosperityList)if(Math.min(5e3,e.Kojania.prosperity)<=t.num)return[t.text,t.className]},targetAvailableWarriors:(e,a)=>Math.floor(e.Kojania.availableWarriors*Math.min(.6*(1+Math.pow(e.Kojania.prosperity,.5)/100),1)+Math.pow(e.Kojania.reputation+10,.7)/2),totalReserved:(e,a)=>{let t=0;for(let s in e.squadReserved)t+=e.squadReserved[s];return t},reservTax:(e,a)=>{let t=0;for(let s in e.squadReserved)t+=e.squadReserved[s]*e.wpc[s]*.1;return Math.round(t)},reservExp:(e,a)=>{let t=0;for(let s in e.squadReserved)t+=e.squadReserved[s]*e.expbaseinc[s][0];return Math.round(t)}}}}});k(Ia).use(Wa).mount("#app");
